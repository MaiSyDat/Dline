(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[931],{3298:function(e,t,s){Promise.resolve().then(s.bind(s,798))},798:function(e,t,s){"use strict";s.d(t,{default:function(){return O}});var a,l,r,n,i,d,c=s(7437),o=s(2265);let m=o.forwardRef(function(e,t){let{title:s,titleId:a,...l}=e;return o.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor","aria-hidden":"true","data-slot":"icon",ref:t,"aria-labelledby":a},l),s?o.createElement("title",{id:a},s):null,o.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M6 18 18 6M6 6l12 12"}))}),x=o.forwardRef(function(e,t){let{title:s,titleId:a,...l}=e;return o.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor","aria-hidden":"true","data-slot":"icon",ref:t,"aria-labelledby":a},l),s?o.createElement("title",{id:a},s):null,o.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"m4.5 12.75 6 6 9-13.5"}))}),h=o.forwardRef(function(e,t){let{title:s,titleId:a,...l}=e;return o.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor","aria-hidden":"true","data-slot":"icon",ref:t,"aria-labelledby":a},l),s?o.createElement("title",{id:a},s):null,o.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M12 12.75c1.148 0 2.278.08 3.383.237 1.037.146 1.866.966 1.866 2.013 0 3.728-2.35 6.75-5.25 6.75S6.75 18.728 6.75 15c0-1.046.83-1.867 1.866-2.013A24.204 24.204 0 0 1 12 12.75Zm0 0c2.883 0 5.647.508 8.207 1.44a23.91 23.91 0 0 1-1.152 6.06M12 12.75c-2.883 0-5.647.508-8.208 1.44.125 2.104.52 4.136 1.153 6.06M12 12.75a2.25 2.25 0 0 0 2.248-2.354M12 12.75a2.25 2.25 0 0 1-2.248-2.354M12 8.25c.995 0 1.971-.08 2.922-.236.403-.066.74-.358.795-.762a3.778 3.778 0 0 0-.399-2.25M12 8.25c-.995 0-1.97-.08-2.922-.236-.402-.066-.74-.358-.795-.762a3.734 3.734 0 0 1 .4-2.253M12 8.25a2.25 2.25 0 0 0-2.248 2.146M12 8.25a2.25 2.25 0 0 1 2.248 2.146M8.683 5a6.032 6.032 0 0 1-1.155-1.002c.07-.63.27-1.222.574-1.747m.581 2.749A3.75 3.75 0 0 1 15.318 5m0 0c.427-.283.815-.62 1.155-.999a4.471 4.471 0 0 0-.575-1.752M4.921 6a24.048 24.048 0 0 0-.392 3.314c1.668.546 3.416.914 5.223 1.082M19.08 6c.205 1.08.337 2.187.392 3.314a23.882 23.882 0 0 1-5.223 1.082"}))}),p=o.forwardRef(function(e,t){let{title:s,titleId:a,...l}=e;return o.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor","aria-hidden":"true","data-slot":"icon",ref:t,"aria-labelledby":a},l),s?o.createElement("title",{id:a},s):null,o.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"m2.25 12 8.954-8.955c.44-.439 1.152-.439 1.591 0L21.75 12M4.5 9.75v10.125c0 .621.504 1.125 1.125 1.125H9.75v-4.875c0-.621.504-1.125 1.125-1.125h2.25c.621 0 1.125.504 1.125 1.125V21h4.125c.621 0 1.125-.504 1.125-1.125V9.75M8.25 21h8.25"}))}),u=o.forwardRef(function(e,t){let{title:s,titleId:a,...l}=e;return o.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor","aria-hidden":"true","data-slot":"icon",ref:t,"aria-labelledby":a},l),s?o.createElement("title",{id:a},s):null,o.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M20.25 14.15v4.25c0 1.094-.787 2.036-1.872 2.18-2.087.277-4.216.42-6.378.42s-4.291-.143-6.378-.42c-1.085-.144-1.872-1.086-1.872-2.18v-4.25m16.5 0a2.18 2.18 0 0 0 .75-1.661V8.706c0-1.081-.768-2.015-1.837-2.175a48.114 48.114 0 0 0-3.413-.387m4.5 8.006c-.194.165-.42.295-.673.38A23.978 23.978 0 0 1 12 15.75c-2.648 0-5.195-.429-7.577-1.22a2.016 2.016 0 0 1-.673-.38m0 0A2.18 2.18 0 0 1 3 12.489V8.706c0-1.081.768-2.015 1.837-2.175a48.111 48.111 0 0 1 3.413-.387m7.5 0V5.25A2.25 2.25 0 0 0 13.5 3h-3a2.25 2.25 0 0 0-2.25 2.25v.894m7.5 0a48.667 48.667 0 0 0-7.5 0M12 12.75h.008v.008H12v-.008Z"}))}),b=o.forwardRef(function(e,t){let{title:s,titleId:a,...l}=e;return o.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor","aria-hidden":"true","data-slot":"icon",ref:t,"aria-labelledby":a},l),s?o.createElement("title",{id:a},s):null,o.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M3.75 6A2.25 2.25 0 0 1 6 3.75h2.25A2.25 2.25 0 0 1 10.5 6v2.25a2.25 2.25 0 0 1-2.25 2.25H6a2.25 2.25 0 0 1-2.25-2.25V6ZM3.75 15.75A2.25 2.25 0 0 1 6 13.5h2.25a2.25 2.25 0 0 1 2.25 2.25V18a2.25 2.25 0 0 1-2.25 2.25H6A2.25 2.25 0 0 1 3.75 18v-2.25ZM13.5 6a2.25 2.25 0 0 1 2.25-2.25H18A2.25 2.25 0 0 1 20.25 6v2.25A2.25 2.25 0 0 1 18 10.5h-2.25a2.25 2.25 0 0 1-2.25-2.25V6ZM13.5 15.75a2.25 2.25 0 0 1 2.25-2.25H18a2.25 2.25 0 0 1 2.25 2.25V18A2.25 2.25 0 0 1 18 20.25h-2.25A2.25 2.25 0 0 1 13.5 18v-2.25Z"}))}),g=o.forwardRef(function(e,t){let{title:s,titleId:a,...l}=e;return o.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor","aria-hidden":"true","data-slot":"icon",ref:t,"aria-labelledby":a},l),s?o.createElement("title",{id:a},s):null,o.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M18 18.72a9.094 9.094 0 0 0 3.741-.479 3 3 0 0 0-4.682-2.72m.94 3.198.001.031c0 .225-.012.447-.037.666A11.944 11.944 0 0 1 12 21c-2.17 0-4.207-.576-5.963-1.584A6.062 6.062 0 0 1 6 18.719m12 0a5.971 5.971 0 0 0-.941-3.197m0 0A5.995 5.995 0 0 0 12 12.75a5.995 5.995 0 0 0-5.058 2.772m0 0a3 3 0 0 0-4.681 2.72 8.986 8.986 0 0 0 3.74.477m.94-3.197a5.971 5.971 0 0 0-.94 3.197M15 6.75a3 3 0 1 1-6 0 3 3 0 0 1 6 0Zm6 3a2.25 2.25 0 1 1-4.5 0 2.25 2.25 0 0 1 4.5 0Zm-13.5 0a2.25 2.25 0 1 1-4.5 0 2.25 2.25 0 0 1 4.5 0Z"}))}),f=o.forwardRef(function(e,t){let{title:s,titleId:a,...l}=e;return o.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor","aria-hidden":"true","data-slot":"icon",ref:t,"aria-labelledby":a},l),s?o.createElement("title",{id:a},s):null,o.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M15.75 9V5.25A2.25 2.25 0 0 0 13.5 3h-6a2.25 2.25 0 0 0-2.25 2.25v13.5A2.25 2.25 0 0 0 7.5 21h6a2.25 2.25 0 0 0 2.25-2.25V15m3 0 3-3m0 0-3-3m3 3H9"}))}),w=o.forwardRef(function(e,t){let{title:s,titleId:a,...l}=e;return o.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor","aria-hidden":"true","data-slot":"icon",ref:t,"aria-labelledby":a},l),s?o.createElement("title",{id:a},s):null,o.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M15.75 19.5 8.25 12l7.5-7.5"}))}),j=o.forwardRef(function(e,t){let{title:s,titleId:a,...l}=e;return o.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor","aria-hidden":"true","data-slot":"icon",ref:t,"aria-labelledby":a},l),s?o.createElement("title",{id:a},s):null,o.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"m21 21-5.197-5.197m0 0A7.5 7.5 0 1 0 5.196 5.196a7.5 7.5 0 0 0 10.607 10.607Z"}))}),v=o.forwardRef(function(e,t){let{title:s,titleId:a,...l}=e;return o.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor","aria-hidden":"true","data-slot":"icon",ref:t,"aria-labelledby":a},l),s?o.createElement("title",{id:a},s):null,o.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M12 10.5v6m3-3H9m4.06-7.19-2.12-2.12a1.5 1.5 0 0 0-1.061-.44H4.5A2.25 2.25 0 0 0 2.25 6v12a2.25 2.25 0 0 0 2.25 2.25h15A2.25 2.25 0 0 0 21.75 18V9a2.25 2.25 0 0 0-2.25-2.25h-5.379a1.5 1.5 0 0 1-1.06-.44Z"}))}),N=o.forwardRef(function(e,t){let{title:s,titleId:a,...l}=e;return o.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor","aria-hidden":"true","data-slot":"icon",ref:t,"aria-labelledby":a},l),s?o.createElement("title",{id:a},s):null,o.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M12 4.5v15m7.5-7.5h-15"}))}),k=o.forwardRef(function(e,t){let{title:s,titleId:a,...l}=e;return o.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor","aria-hidden":"true","data-slot":"icon",ref:t,"aria-labelledby":a},l),s?o.createElement("title",{id:a},s):null,o.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"m2.25 15.75 5.159-5.159a2.25 2.25 0 0 1 3.182 0l5.159 5.159m-1.5-1.5 1.409-1.409a2.25 2.25 0 0 1 3.182 0l2.909 2.909m-18 3.75h16.5a1.5 1.5 0 0 0 1.5-1.5V6a1.5 1.5 0 0 0-1.5-1.5H3.75A1.5 1.5 0 0 0 2.25 6v12a1.5 1.5 0 0 0 1.5 1.5Zm10.5-11.25h.008v.008h-.008V8.25Zm.375 0a.375.375 0 1 1-.75 0 .375.375 0 0 1 .75 0Z"}))}),y=o.forwardRef(function(e,t){let{title:s,titleId:a,...l}=e;return o.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor","aria-hidden":"true","data-slot":"icon",ref:t,"aria-labelledby":a},l),s?o.createElement("title",{id:a},s):null,o.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"m14.74 9-.346 9m-4.788 0L9.26 9m9.968-3.21c.342.052.682.107 1.022.166m-1.022-.165L18.16 19.673a2.25 2.25 0 0 1-2.244 2.077H8.084a2.25 2.25 0 0 1-2.244-2.077L4.772 5.79m14.456 0a48.108 48.108 0 0 0-3.478-.397m-12 .562c.34-.059.68-.114 1.022-.165m0 0a48.11 48.11 0 0 1 3.478-.397m7.5 0v-.916c0-1.18-.91-2.164-2.09-2.201a51.964 51.964 0 0 0-3.32 0c-1.18.037-2.09 1.022-2.09 2.201v.916m7.5 0a48.667 48.667 0 0 0-7.5 0"}))}),E=o.forwardRef(function(e,t){let{title:s,titleId:a,...l}=e;return o.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor","aria-hidden":"true","data-slot":"icon",ref:t,"aria-labelledby":a},l),s?o.createElement("title",{id:a},s):null,o.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M12 6v6h4.5m4.5 0a9 9 0 1 1-18 0 9 9 0 0 1 18 0Z"}))}),C=o.forwardRef(function(e,t){let{title:s,titleId:a,...l}=e;return o.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor","aria-hidden":"true","data-slot":"icon",ref:t,"aria-labelledby":a},l),s?o.createElement("title",{id:a},s):null,o.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M6.75 3v2.25M17.25 3v2.25M3 18.75V7.5a2.25 2.25 0 0 1 2.25-2.25h13.5A2.25 2.25 0 0 1 21 7.5v11.25m-18 0A2.25 2.25 0 0 0 5.25 21h13.5A2.25 2.25 0 0 0 21 18.75m-18 0v-7.5A2.25 2.25 0 0 1 5.25 9h13.5A2.25 2.25 0 0 1 21 11.25v7.5m-9-6h.008v.008H12v-.008ZM12 15h.008v.008H12V15Zm0 2.25h.008v.008H12v-.008ZM9.75 15h.008v.008H9.75V15Zm0 2.25h.008v.008H9.75v-.008ZM7.5 15h.008v.008H7.5V15Zm0 2.25h.008v.008H7.5v-.008Zm6.75-4.5h.008v.008h-.008v-.008Zm0 2.25h.008v.008h-.008V15Zm0 2.25h.008v.008h-.008v-.008Zm2.25-4.5h.008v.008H16.5v-.008Zm0 2.25h.008v.008H16.5V15Z"}))}),L=o.forwardRef(function(e,t){let{title:s,titleId:a,...l}=e;return o.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor","aria-hidden":"true","data-slot":"icon",ref:t,"aria-labelledby":a},l),s?o.createElement("title",{id:a},s):null,o.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"m8.25 4.5 7.5 7.5-7.5 7.5"}))});(a=n||(n={})).ADMIN="admin",a.MANAGER="manager",a.EMPLOYEE="employee",(l=i||(i={})).NEW="new",l.BUG="bug",l.IN_PROGRESS="in-progress",l.FIXED="fixed",l.DONE="done",(r=d||(d={})).LOW="low",r.MEDIUM="medium",r.HIGH="high";let M=async(e,t)=>{let s=await fetch(e,t),a=await s.json();if(!s.ok||(null==a?void 0:a.ok)===!1)throw Error((null==a?void 0:a.error)||s.statusText);return a},D=e=>{let{users:t,selectedIds:s,onChange:a,label:l}=e,[r,n]=(0,o.useState)(""),[i,d]=(0,o.useState)(!1),h=(0,o.useRef)(null);(0,o.useEffect)(()=>{let e=e=>{h.current&&!h.current.contains(e.target)&&d(!1)};return document.addEventListener("mousedown",e),()=>document.removeEventListener("mousedown",e)},[]);let p=t.filter(e=>e.name.toLowerCase().includes(r.toLowerCase()));return(0,c.jsxs)("div",{className:"relative space-y-1",ref:h,children:[(0,c.jsx)("label",{className:"text-[10px] font-bold text-slate-400 uppercase tracking-widest ml-0.5",children:l}),(0,c.jsxs)("div",{className:"w-full min-h-[42px] p-1.5 border border-slate-200 rounded-md bg-white flex flex-wrap gap-1.5 cursor-pointer hover:border-accent transition-colors",onClick:()=>d(!i),children:[0===s.length&&(0,c.jsx)("span",{className:"text-slate-400 text-sm py-1 px-2",children:"T\xecm kiếm & Chọn nh\xe2n sự..."}),s.map(e=>{let l=t.find(t=>t.id===e);return(0,c.jsxs)("div",{className:"bg-slate-50 text-slate-700 px-2 py-0.5 rounded border border-slate-200 flex items-center gap-1.5 text-xs font-bold",children:[(0,c.jsx)("img",{src:null==l?void 0:l.avatar,className:"w-4 h-4 rounded-full"}),null==l?void 0:l.name,(0,c.jsx)(m,{className:"w-3 h-3 cursor-pointer hover:text-red-500",onClick:t=>{t.stopPropagation(),a(s.filter(t=>t!==e))}})]},e)})]}),i&&(0,c.jsxs)("div",{className:"absolute z-[250] top-full left-0 w-full mt-1 bg-white border border-slate-200 rounded-md shadow-2xl max-h-60 overflow-y-auto custom-scrollbar modal-enter",children:[(0,c.jsx)("div",{className:"p-2 sticky top-0 bg-white border-b border-slate-100",children:(0,c.jsx)("input",{autoFocus:!0,className:"w-full px-3 py-2 text-sm border-none focus:ring-0",placeholder:"Nhập t\xean...",value:r,onChange:e=>n(e.target.value),onClick:e=>e.stopPropagation()})}),p.map(e=>(0,c.jsxs)("div",{className:"p-3 text-sm flex items-center gap-3 cursor-pointer hover:bg-slate-50 ".concat(s.includes(e.id)?"bg-blue-50 text-blue-600":""),onClick:t=>{t.stopPropagation(),s.includes(e.id)?a(s.filter(t=>t!==e.id)):a([...s,e.id])},children:[(0,c.jsx)("img",{src:e.avatar,className:"w-6 h-6 rounded-full"}),(0,c.jsx)("div",{className:"flex-1 font-medium",children:e.name}),s.includes(e.id)&&(0,c.jsx)(x,{className:"w-4 h-4"})]},e.id))]})]})},S=[{id:"overdue",label:"Qu\xe1 hạn",color:"#EF4444"},{id:"today",label:"H\xf4m nay",color:"#10B981"},{id:"thisWeek",label:"Tuần n\xe0y",color:"#3B82F6"},{id:"later",label:"Sắp tới",color:"#6366F1"},{id:"done",label:"Đ\xe3 xong",color:"#94A3B8"}];var O=()=>{var e,t,s,a,l,r;let[O,A]=(0,o.useState)(null),[T,H]=(0,o.useState)("dashboard"),[I,B]=(0,o.useState)([]),[V,R]=(0,o.useState)([]),[Z,W]=(0,o.useState)([]),[P,U]=(0,o.useState)(null),[q,F]=(0,o.useState)(!1),[G,z]=(0,o.useState)(!1),[K,X]=(0,o.useState)(null),[_,J]=(0,o.useState)([]),[Y,Q]=(0,o.useState)([]),[$,ee]=(0,o.useState)(null),et=(0,o.useRef)(null),[es,ea]=(0,o.useState)(!1),[el,er]=(0,o.useState)(0),[en,ei]=(0,o.useState)(0),[ed,ec]=(0,o.useState)(!0),[eo,em]=(0,o.useState)(null),[ex,eh]=(0,o.useState)(null),[ep,eu]=(0,o.useState)(!1),[eb,eg]=(0,o.useState)(!1);(0,o.useEffect)(()=>{(async()=>{try{ec(!0);let[{data:e},{data:t},{data:s}]=await Promise.all([M("/api/users"),M("/api/projects"),M("/api/tasks")]);W(e),R(t),B(s),em(null)}catch(e){em(e instanceof Error?e.message:"Kh\xf4ng tải được dữ liệu")}finally{ec(!1)}})()},[]);let ef=()=>ea(!1),ew=async e=>{e.preventDefault();let t=new FormData(e.currentTarget);eh(null);try{let e=await M("/api/users/login",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({email:t.get("email"),password:t.get("password")})});A(e.data)}catch(e){eh(e instanceof Error?e.message:"Đăng nhập thất bại")}},ej=async e=>{if(e.preventDefault(),ep)return;eu(!0);let t=new FormData(e.currentTarget);try{let e={projectId:t.get("projectId"),title:t.get("title"),description:t.get("description"),assigneeId:t.get("assigneeId"),startDate:t.get("startDate"),deadline:t.get("deadline"),status:"on"===t.get("isBug")?i.BUG:i.NEW,priority:t.get("priority")||d.MEDIUM,imageUrls:_.length>0?_:void 0},s=await M("/api/tasks",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(e)});B(e=>[...e,s.data]),F(!1),J([])}catch(e){alert(e instanceof Error?e.message:"Kh\xf4ng tạo được c\xf4ng việc")}finally{eu(!1)}},ev=async e=>{if(e.preventDefault(),ep)return;eu(!0);let t=new FormData(e.currentTarget);try{let e={name:t.get("name"),description:t.get("description"),memberIds:Y,startDate:t.get("startDate"),deadline:t.get("deadline"),managerId:null==O?void 0:O.id,status:"active"},s=await M("/api/projects",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(e)});R(e=>[...e,s.data]),z(!1),Q([])}catch(e){alert(e instanceof Error?e.message:"Kh\xf4ng tạo được dự \xe1n")}finally{eu(!1)}},eN=async e=>{try{await M("/api/tasks/"+e,{method:"DELETE"}),B(t=>t.filter(t=>t.id!==e)),X(null)}catch(e){alert(e instanceof Error?e.message:"Kh\xf4ng x\xf3a được c\xf4ng việc")}},ek=async e=>{if(e.preventDefault(),ep)return;eu(!0);let t=new FormData(e.currentTarget),s={name:t.get("name"),email:t.get("email"),password:t.get("password"),role:t.get("role")||n.EMPLOYEE,avatar:t.get("avatar")||void 0};try{let e=await M("/api/users",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(s)});W(t=>[...t,e.data]),eg(!1)}catch(e){alert(e instanceof Error?e.message:"Kh\xf4ng tạo được nh\xe2n sự")}finally{eu(!1)}},ey=async e=>{try{let t=await M("/api/tasks/"+e.id,{method:"PUT",headers:{"Content-Type":"application/json"},body:JSON.stringify({status:i.DONE})});B(s=>s.map(s=>s.id===e.id?t.data:s)),X(null)}catch(e){alert(e instanceof Error?e.message:"Kh\xf4ng cập nhật được c\xf4ng việc")}},eE=(0,o.useMemo)(()=>P?I.filter(e=>e.projectId===P):I,[I,P]),eC=(0,o.useMemo)(()=>{let e={overdue:[],today:[],thisWeek:[],later:[],done:[]},t=new Date;return t.setHours(0,0,0,0),eE.forEach(s=>{if(s.status===i.DONE){e.done.push(s);return}if(!s.deadline){e.later.push(s);return}let a=new Date(s.deadline);a.setHours(0,0,0,0);let l=Math.floor((a.getTime()-t.getTime())/864e5);l<0?e.overdue.push(s):0===l?e.today.push(s):l>0&&l<=7?e.thisWeek.push(s):e.later.push(s)}),e},[eE]),eL=e=>{let{task:t}=e;return t.status===i.BUG?(0,c.jsxs)("span",{className:"bg-red-50 text-red-500 px-2 py-0.5 rounded text-[9px] font-black border border-red-100 flex items-center gap-1 uppercase",children:[(0,c.jsx)(h,{className:"w-3 h-3"})," Lỗi"]}):t.status===i.DONE?(0,c.jsx)("span",{className:"bg-emerald-50 text-emerald-600 px-2 py-0.5 rounded text-[9px] font-black border border-emerald-100 uppercase tracking-wider",children:"Xong"}):(0,c.jsx)("span",{className:"bg-slate-50 text-slate-500 px-2 py-0.5 rounded text-[9px] font-black border border-slate-100 uppercase tracking-wider",children:t.status})};return ed?(0,c.jsx)("div",{className:"min-h-screen flex items-center justify-center bg-slate-900 text-white",children:(0,c.jsxs)("div",{className:"text-center space-y-2",children:[(0,c.jsx)("div",{className:"w-12 h-12 mx-auto border-2 border-white/20 border-t-white rounded-full animate-spin"}),(0,c.jsx)("p",{className:"text-sm",children:"Đang tải dữ liệu..."}),eo&&(0,c.jsx)("p",{className:"text-red-300 text-xs",children:eo})]})}):O?(0,c.jsxs)("div",{className:"flex h-screen bg-[#F8FAFC] overflow-hidden relative",children:[(0,c.jsxs)("aside",{className:"hidden md:flex w-64 bg-primary flex-col shrink-0",children:[(0,c.jsxs)("div",{className:"p-8 flex items-center gap-3 border-b border-white/5",children:[(0,c.jsx)("div",{className:"w-8 h-8 bg-accent rounded flex items-center justify-center text-white font-black",children:"D"}),(0,c.jsx)("span",{className:"text-white font-bold tracking-tight",children:"D-LINE PRO"})]}),(0,c.jsxs)("nav",{className:"flex-1 px-4 py-6 space-y-1 overflow-y-auto no-scrollbar",children:[(0,c.jsxs)("button",{onClick:()=>{H("dashboard"),U(null)},className:"w-full flex items-center gap-3 px-4 py-3 rounded-md text-sm font-medium transition-all ".concat("dashboard"===T?"bg-white/10 text-white shadow-inner":"text-slate-400 hover:text-white hover:bg-white/5"),children:[(0,c.jsx)(p,{className:"w-5 h-5"})," Tổng quan"]}),(0,c.jsxs)("button",{onClick:()=>{H("projects"),U(null)},className:"w-full flex items-center gap-3 px-4 py-3 rounded-md text-sm font-medium transition-all ".concat("projects"===T?"bg-white/10 text-white shadow-inner":"text-slate-400 hover:text-white hover:bg-white/5"),children:[(0,c.jsx)(u,{className:"w-5 h-5"})," Dự \xe1n"]}),(0,c.jsxs)("button",{onClick:()=>{H("tasks"),U(null)},className:"w-full flex items-center gap-3 px-4 py-3 rounded-md text-sm font-medium transition-all ".concat("tasks"===T?"bg-white/10 text-white shadow-inner":"text-slate-400 hover:text-white hover:bg-white/5"),children:[(0,c.jsx)(b,{className:"w-5 h-5"})," C\xf4ng việc"]}),(0,c.jsxs)("button",{onClick:()=>{H("team"),U(null)},className:"w-full flex items-center gap-3 px-4 py-3 rounded-md text-sm font-medium transition-all ".concat("team"===T?"bg-white/10 text-white shadow-inner":"text-slate-400 hover:text-white hover:bg-white/5"),children:[(0,c.jsx)(g,{className:"w-5 h-5"})," Nh\xe2n sự"]}),(0,c.jsx)("div",{className:"pt-8 px-4 pb-2",children:(0,c.jsx)("span",{className:"text-[10px] font-bold text-slate-600 uppercase tracking-widest",children:"Dự \xe1n tham gia"})}),(0,c.jsx)("div",{className:"space-y-0.5",children:V.map(e=>(0,c.jsxs)("button",{onClick:()=>{U(e.id),H("tasks")},className:"w-full flex items-center gap-3 px-4 py-2 rounded text-xs transition-all ".concat(P===e.id?"text-white font-bold bg-white/5":"text-slate-500 hover:text-white"),children:[(0,c.jsx)("div",{className:"w-1.5 h-1.5 rounded-full",style:{backgroundColor:e.color}})," ",e.name]},e.id))})]}),(0,c.jsxs)("div",{className:"p-4 bg-[#0A0F1E] flex items-center gap-3",children:[(0,c.jsx)("img",{src:O.avatar,className:"w-9 h-9 rounded-full border border-white/10",alt:""}),(0,c.jsxs)("div",{className:"flex-1 min-w-0",children:[(0,c.jsx)("p",{className:"text-xs text-white font-bold truncate",children:O.name}),(0,c.jsx)("p",{className:"text-[9px] text-slate-500 uppercase font-black",children:O.role})]}),(0,c.jsx)("button",{onClick:()=>{A(null),H("dashboard"),U(null)},className:"p-2 text-slate-500 hover:text-red-400 transition-colors",children:(0,c.jsx)(f,{className:"w-5 h-5"})})]})]}),(0,c.jsxs)("main",{className:"flex-1 flex flex-col min-w-0 overflow-hidden",children:[(0,c.jsxs)("header",{className:"h-16 bg-white border-b border-slate-200 flex items-center justify-between px-4 md:px-10 shrink-0",children:[(0,c.jsxs)("div",{className:"flex items-center gap-3",children:[P&&(0,c.jsx)("button",{onClick:()=>U(null),className:"p-2 -ml-2 text-slate-400 hover:text-slate-900 transition-colors",children:(0,c.jsx)(w,{className:"w-5 h-5"})}),(0,c.jsx)("h2",{className:"text-xs md:text-sm font-black text-slate-900 uppercase tracking-[0.2em]",children:P?null===(e=V.find(e=>e.id===P))||void 0===e?void 0:e.name:T})]}),(0,c.jsxs)("div",{className:"flex items-center gap-2 md:gap-4",children:[(0,c.jsxs)("div",{className:"relative group hidden sm:block",children:[(0,c.jsx)(j,{className:"w-4 h-4 absolute left-3 top-1/2 -translate-y-1/2 text-slate-400 group-focus-within:text-accent transition-colors"}),(0,c.jsx)("input",{type:"text",placeholder:"T\xecm kiếm...",className:"bg-slate-100 border-none rounded-md pl-9 pr-4 py-2 text-xs w-32 md:w-72 focus:w-40 md:focus:w-72 focus:bg-white focus:ring-1 focus:ring-accent transition-all"})]}),"projects"===T&&(0,c.jsxs)("button",{onClick:()=>z(!0),className:"bg-primary text-white p-2 md:px-4 md:py-2 rounded md:rounded-md text-xs font-bold flex items-center gap-2 hover:bg-slate-800 transition-all",children:[(0,c.jsx)(v,{className:"w-5 h-5 md:w-4 md:h-4"}),(0,c.jsx)("span",{className:"hidden md:inline",children:"Dự \xe1n mới"})]}),"team"===T&&(0,c.jsxs)("button",{onClick:()=>eg(!0),className:"bg-primary text-white p-2 md:px-4 md:py-2 rounded md:rounded-md text-xs font-bold flex items-center gap-2 hover:bg-slate-800 transition-all",children:[(0,c.jsx)(N,{className:"w-5 h-5 md:w-4 md:h-4"}),(0,c.jsx)("span",{className:"hidden md:inline",children:"Nh\xe2n sự mới"})]}),("tasks"===T||P)&&(0,c.jsxs)("button",{onClick:()=>F(!0),className:"bg-accent text-white p-2 md:px-4 md:py-2 rounded md:rounded-md text-xs font-bold flex items-center gap-2 hover:bg-blue-600 shadow-lg shadow-blue-500/20 active:scale-95 transition-all",children:[(0,c.jsx)(N,{className:"w-5 h-5 md:w-4 md:h-4"}),(0,c.jsx)("span",{className:"hidden md:inline",children:"Giao việc mới"})]})]})]}),(0,c.jsxs)("div",{className:"flex-1 overflow-y-auto custom-scrollbar p-4 md:p-10 pb-24 md:pb-10",children:["dashboard"===T&&(0,c.jsxs)("div",{className:"space-y-6 md:space-y-10 modal-enter max-w-7xl mx-auto",children:[(0,c.jsx)("div",{className:"grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-4 gap-4 md:gap-6",children:[{label:"Dự \xe1n đang chạy",val:V.length,icon:u,color:"text-slate-900",bg:"bg-white"},{label:"Tổng c\xf4ng việc",val:I.length,icon:b,color:"text-blue-600",bg:"bg-white"},{label:"Việc ho\xe0n th\xe0nh",val:I.filter(e=>e.status===i.DONE).length,icon:x,color:"text-emerald-600",bg:"bg-white"},{label:"Tổng lỗi (Bugs)",val:I.filter(e=>e.status===i.BUG).length,icon:h,color:"text-red-500",bg:"bg-white"}].map((e,t)=>(0,c.jsxs)("div",{className:"".concat(e.bg," p-6 md:p-8 rounded-lg border border-slate-200 shadow-sm flex flex-col items-center text-center group hover:border-accent transition-all"),children:[(0,c.jsx)("div",{className:"w-10 h-10 md:w-12 md:h-12 rounded-full bg-slate-50 flex items-center justify-center mb-4 group-hover:scale-110 transition-transform",children:(0,c.jsx)(e.icon,{className:"w-5 h-5 md:w-6 md:h-6 ".concat(e.color)})}),(0,c.jsx)("p",{className:"text-2xl md:text-3xl font-black text-slate-900",children:e.val}),(0,c.jsx)("p",{className:"text-[9px] md:text-[10px] font-bold text-slate-400 uppercase mt-1 tracking-widest",children:e.label})]},t))}),(0,c.jsxs)("div",{className:"bg-white p-6 md:p-8 rounded-lg border border-slate-200 shadow-sm",children:[(0,c.jsxs)("div",{className:"flex justify-between items-center mb-6 md:mb-8",children:[(0,c.jsx)("h3",{className:"font-black text-slate-900 text-[10px] md:text-sm uppercase tracking-widest",children:"T\xecnh trạng c\xf4ng việc gần nhất"}),(0,c.jsx)("button",{className:"text-[9px] md:text-[10px] font-bold text-accent hover:underline uppercase",children:"Tất cả"})]}),(0,c.jsx)("div",{className:"divide-y divide-slate-50",children:I.filter(e=>e.status!==i.DONE).slice(0,5).map(e=>{var t;return(0,c.jsxs)("div",{onClick:()=>X(e),className:"flex items-center justify-between py-4 md:py-5 hover:bg-slate-50 px-2 md:px-4 md:-mx-4 transition-all cursor-pointer group rounded-md",children:[(0,c.jsxs)("div",{className:"flex items-center gap-3 md:gap-5 min-w-0",children:[(0,c.jsx)(eL,{task:e}),(0,c.jsx)("p",{className:"text-xs md:text-sm font-bold text-slate-700 truncate group-hover:text-accent",children:e.title})]}),(0,c.jsxs)("div",{className:"flex items-center gap-4 md:gap-8 shrink-0",children:[(0,c.jsxs)("div",{className:"text-right hidden sm:block",children:[(0,c.jsx)("p",{className:"text-[9px] font-black text-slate-300 uppercase",children:"Deadline"}),(0,c.jsx)("p",{className:"text-xs font-bold text-slate-500",children:new Date(e.deadline||"").toLocaleDateString("vi-VN")})]}),(0,c.jsx)("img",{src:null===(t=Z.find(t=>t.id===e.assigneeId))||void 0===t?void 0:t.avatar,className:"w-6 h-6 md:w-8 md:h-8 rounded-full border border-slate-100 shadow-sm"})]})]},e.id)})})]})]}),"projects"===T&&(0,c.jsx)("div",{className:"grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-3 gap-6 md:gap-8 modal-enter max-w-7xl mx-auto",children:V.map(e=>(0,c.jsxs)("div",{onClick:()=>{U(e.id),H("tasks")},className:"bg-white rounded-lg border border-slate-200 overflow-hidden shadow-sm hover:shadow-xl transition-all cursor-pointer group flex flex-col",children:[(0,c.jsx)("div",{className:"h-1 w-full",style:{backgroundColor:e.color}}),(0,c.jsxs)("div",{className:"p-6 md:p-8-1",children:[(0,c.jsxs)("div",{className:"flex justify-between items-start mb-4 md:mb-6",children:[(0,c.jsx)("div",{className:"p-2 bg-slate-50 rounded group-hover:bg-accent/5 transition-colors",children:(0,c.jsx)(u,{className:"w-5 h-5 md:w-6 md:h-6 text-slate-300 group-hover:text-accent"})}),(0,c.jsx)("span",{className:"px-2 py-0.5 bg-blue-50 text-blue-600 text-[9px] font-black rounded border border-blue-100 uppercase tracking-widest",children:"Active"})]}),(0,c.jsx)("h3",{className:"text-base md:text-lg font-bold text-slate-900 mb-2 group-hover:text-accent transition-colors",children:e.name}),(0,c.jsx)("p",{className:"text-xs text-slate-500 line-clamp-2 leading-relaxed mb-6 md:mb-10",children:e.description}),(0,c.jsxs)("div",{className:"flex justify-between items-center pt-6 md:pt-8 border-t border-slate-50",children:[(0,c.jsxs)("div",{className:"flex -space-x-2",children:[e.memberIds.slice(0,3).map(e=>{var t;return(0,c.jsx)("img",{src:null===(t=Z.find(t=>t.id===e))||void 0===t?void 0:t.avatar,className:"w-7 h-7 md:w-8 md:h-8 rounded-full border-2 border-white shadow-sm"},e)}),e.memberIds.length>3&&(0,c.jsxs)("div",{className:"w-7 h-7 md:w-8 md:h-8 rounded-full bg-slate-100 flex items-center justify-center text-[8px] md:text-[9px] font-bold text-slate-400 border-2 border-white",children:["+",e.memberIds.length-3]})]}),(0,c.jsxs)("div",{className:"text-right",children:[(0,c.jsx)("p",{className:"text-[9px] font-black text-slate-300 uppercase",children:"Hạn"}),(0,c.jsx)("p",{className:"text-xs font-bold text-slate-800",children:new Date(e.deadline||"").toLocaleDateString("vi-VN")})]})]})]})]},e.id))}),"tasks"===T&&(0,c.jsx)("div",{className:"h-full flex flex-col modal-enter relative",children:(0,c.jsx)("div",{className:"flex gap-4 md:gap-6 overflow-x-auto pb-10 custom-scrollbar grab-scroll ".concat(es?"cursor-grabbing":"cursor-grab"),ref:et,onMouseDown:e=>{et.current&&(ea(!0),er(e.pageX-et.current.offsetLeft),ei(et.current.scrollLeft))},onMouseUp:ef,onMouseLeave:ef,onMouseMove:e=>{if(!es||!et.current)return;e.preventDefault();let t=e.pageX-et.current.offsetLeft;et.current.scrollLeft=en-(t-el)*1.5},children:S.map(e=>{var t,s;return(0,c.jsxs)("div",{className:"kanban-column flex flex-col select-none",children:[(0,c.jsx)("div",{className:"flex items-center justify-between px-3 mb-4 md:mb-5",children:(0,c.jsxs)("div",{className:"flex items-center gap-2.5",children:[(0,c.jsx)("span",{className:"text-xs font-black text-slate-600 uppercase tracking-[0.15em]",children:e.label}),(0,c.jsx)("span",{className:"bg-slate-200/60 text-slate-500 text-[10px] px-2 py-0.5 rounded-full font-black",children:(null===(t=eC[e.id])||void 0===t?void 0:t.length)||0})]})}),(0,c.jsx)("div",{className:"flex-1 bg-slate-200/30 rounded-lg p-3 space-y-3 md:space-y-4 min-h-[500px] border border-slate-200/40",children:null===(s=eC[e.id])||void 0===s?void 0:s.map(t=>{var s;return(0,c.jsxs)("div",{onClick:e=>{es||X(t)},className:"bg-white p-4 md:p-5 rounded-md border border-slate-200 shadow-sm hover:border-accent transition-all cursor-pointer group",children:[(0,c.jsxs)("div",{className:"flex justify-between items-start mb-3 md:mb-4",children:[(0,c.jsx)(eL,{task:t}),(0,c.jsx)("div",{className:"px-2 py-0.5 rounded text-[8px] font-black uppercase border ".concat(t.priority===d.HIGH?"bg-red-50 text-red-500 border-red-100":"bg-slate-50 text-slate-400 border-slate-100"),children:t.priority})]}),(0,c.jsx)("h4",{className:"text-[13px] font-bold text-slate-800 mb-4 md:mb-5 leading-relaxed line-clamp-2 group-hover:text-accent transition-colors",children:t.title}),(0,c.jsxs)("div",{className:"flex justify-between items-center mt-auto",children:[(0,c.jsxs)("div",{className:"flex items-center gap-2",children:[(0,c.jsx)("img",{src:null===(s=Z.find(e=>e.id===t.assigneeId))||void 0===s?void 0:s.avatar,className:"w-7 h-7 rounded-full border border-slate-100 shadow-sm"}),t.imageUrls&&t.imageUrls.length>0&&(0,c.jsx)("span",{className:"flex items-center gap-1 text-slate-300",children:(0,c.jsx)(k,{className:"w-3.5 h-3.5"})})]}),(0,c.jsx)("span",{className:"text-[10px] font-bold flex items-center gap-1 ".concat("overdue"===e.id?"text-red-500":"text-slate-400"),children:new Date(t.deadline||"").toLocaleDateString("vi-VN",{day:"2-digit",month:"2-digit"})})]})]},t.id)})})]},e.id)})})}),"team"===T&&(0,c.jsx)("div",{className:"grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-4 gap-6 md:gap-8 modal-enter max-w-7xl mx-auto",children:Z.map(e=>{let t=I.filter(t=>t.assigneeId===e.id&&t.status!==i.DONE).length;return(0,c.jsxs)("div",{className:"bg-white p-6 md:p-8 rounded-lg border border-slate-200 shadow-sm text-center group hover:border-accent transition-all",children:[(0,c.jsx)("img",{src:e.avatar,className:"w-20 h-20 md:w-24 md:h-24 rounded-full mx-auto mb-6 border-4 border-slate-50 shadow-inner"}),(0,c.jsx)("h4",{className:"font-bold text-slate-900 group-hover:text-accent",children:e.name}),(0,c.jsx)("p",{className:"text-[9px] md:text-[10px] font-black text-slate-400 uppercase mb-6 tracking-widest",children:e.role}),(0,c.jsxs)("div",{className:"pt-6 border-t border-slate-50 flex justify-around",children:[(0,c.jsxs)("div",{className:"text-center",children:[(0,c.jsx)("p",{className:"text-lg md:text-xl font-black text-slate-900",children:t}),(0,c.jsx)("p",{className:"text-[8px] md:text-[9px] text-slate-400 font-black uppercase",children:"Đang l\xe0m"})]}),(0,c.jsxs)("div",{className:"text-center",children:[(0,c.jsx)("p",{className:"text-lg md:text-xl font-black text-slate-900",children:I.filter(t=>t.assigneeId===e.id&&t.status===i.DONE).length}),(0,c.jsx)("p",{className:"text-[8px] md:text-[9px] text-slate-400 font-black uppercase",children:"Xong"})]})]})]},e.id)})})]})]}),(0,c.jsxs)("nav",{className:"md:hidden fixed bottom-0 left-0 right-0 bg-white border-t border-slate-200 h-16 flex items-center justify-around px-2 z-40",children:[(0,c.jsxs)("button",{onClick:()=>{H("dashboard"),U(null)},className:"flex flex-col items-center justify-center w-full h-full gap-1 transition-colors ".concat("dashboard"===T?"text-accent":"text-slate-400"),children:[(0,c.jsx)(p,{className:"w-6 h-6"}),(0,c.jsx)("span",{className:"text-[9px] font-bold uppercase tracking-tighter",children:"Tổng quan"})]}),(0,c.jsxs)("button",{onClick:()=>{H("projects"),U(null)},className:"flex flex-col items-center justify-center w-full h-full gap-1 transition-colors ".concat("projects"===T?"text-accent":"text-slate-400"),children:[(0,c.jsx)(u,{className:"w-6 h-6"}),(0,c.jsx)("span",{className:"text-[9px] font-bold uppercase tracking-tighter",children:"Dự \xe1n"})]}),(0,c.jsxs)("button",{onClick:()=>{H("tasks"),U(null)},className:"flex flex-col items-center justify-center w-full h-full gap-1 transition-colors ".concat("tasks"===T?"text-accent":"text-slate-400"),children:[(0,c.jsx)(b,{className:"w-6 h-6"}),(0,c.jsx)("span",{className:"text-[9px] font-bold uppercase tracking-tighter",children:"C\xf4ng việc"})]}),(0,c.jsxs)("button",{onClick:()=>{H("team"),U(null)},className:"flex flex-col items-center justify-center w-full h-full gap-1 transition-colors ".concat("team"===T?"text-accent":"text-slate-400"),children:[(0,c.jsx)(g,{className:"w-6 h-6"}),(0,c.jsx)("span",{className:"text-[9px] font-bold uppercase tracking-tighter",children:"Nh\xe2n sự"})]})]}),eb&&(0,c.jsx)("div",{className:"fixed inset-0 z-[400] flex items-center justify-center bg-slate-900/60 backdrop-blur-sm p-4",onClick:()=>eg(!1),children:(0,c.jsxs)("div",{className:"bg-white w-full max-w-md rounded-lg shadow-2xl overflow-hidden modal-enter max-h-[90vh] flex flex-col",onClick:e=>e.stopPropagation(),children:[(0,c.jsxs)("div",{className:"px-6 py-4 bg-primary text-white flex justify-between items-center shrink-0",children:[(0,c.jsx)("h3",{className:"text-xs font-black uppercase tracking-widest",children:"Th\xeam nh\xe2n sự"}),(0,c.jsx)("button",{onClick:()=>eg(!1),children:(0,c.jsx)(m,{className:"w-6 h-6"})})]}),(0,c.jsxs)("form",{onSubmit:ek,className:"p-6 space-y-4 overflow-y-auto custom-scrollbar",children:[(0,c.jsxs)("div",{className:"space-y-1",children:[(0,c.jsx)("label",{className:"text-[10px] font-bold text-slate-400 uppercase tracking-widest",children:"Họ t\xean"}),(0,c.jsx)("input",{required:!0,name:"name",className:"w-full px-4 py-2.5 border border-slate-200 rounded text-sm bg-slate-50 focus:bg-white",placeholder:"T\xean nh\xe2n sự..."})]}),(0,c.jsxs)("div",{className:"space-y-1",children:[(0,c.jsx)("label",{className:"text-[10px] font-bold text-slate-400 uppercase tracking-widest",children:"Email"}),(0,c.jsx)("input",{required:!0,name:"email",type:"email",className:"w-full px-4 py-2.5 border border-slate-200 rounded text-sm bg-slate-50 focus:bg-white",placeholder:"email@company.com"})]}),(0,c.jsxs)("div",{className:"space-y-1",children:[(0,c.jsx)("label",{className:"text-[10px] font-bold text-slate-400 uppercase tracking-widest",children:"Mật khẩu"}),(0,c.jsx)("input",{required:!0,name:"password",type:"password",className:"w-full px-4 py-2.5 border border-slate-200 rounded text-sm bg-slate-50 focus:bg-white",placeholder:"******"})]}),(0,c.jsxs)("div",{className:"space-y-1",children:[(0,c.jsx)("label",{className:"text-[10px] font-bold text-slate-400 uppercase tracking-widest",children:"Vai tr\xf2"}),(0,c.jsxs)("select",{name:"role",className:"w-full px-4 py-2.5 border border-slate-200 rounded text-sm bg-slate-50",children:[(0,c.jsx)("option",{value:n.EMPLOYEE,children:"Employee"}),(0,c.jsx)("option",{value:n.MANAGER,children:"Manager"}),(0,c.jsx)("option",{value:n.ADMIN,children:"Admin"})]})]}),(0,c.jsxs)("div",{className:"space-y-1",children:[(0,c.jsx)("label",{className:"text-[10px] font-bold text-slate-400 uppercase tracking-widest",children:"Avatar (tuỳ chọn)"}),(0,c.jsx)("input",{name:"avatar",className:"w-full px-4 py-2.5 border border-slate-200 rounded text-sm bg-slate-50 focus:bg-white",placeholder:"https://..."})]}),(0,c.jsx)("button",{disabled:ep,className:"w-full py-3.5 bg-primary text-white rounded font-black text-sm uppercase tracking-widest mt-2 disabled:opacity-60",children:ep?"Đang tạo...":"Tạo t\xe0i khoản"})]})]})}),G&&(0,c.jsx)("div",{className:"fixed inset-0 z-[400] flex items-center justify-center bg-slate-900/60 backdrop-blur-sm p-4",onClick:()=>z(!1),children:(0,c.jsxs)("div",{className:"bg-white w-full max-w-lg rounded-lg shadow-2xl overflow-hidden modal-enter max-h-[90vh] flex flex-col",onClick:e=>e.stopPropagation(),children:[(0,c.jsxs)("div",{className:"px-6 py-4 bg-primary text-white flex justify-between items-center shrink-0",children:[(0,c.jsx)("h3",{className:"text-xs font-black uppercase tracking-widest",children:"Khởi tạo dự \xe1n mới"}),(0,c.jsx)("button",{onClick:()=>z(!1),children:(0,c.jsx)(m,{className:"w-6 h-6"})})]}),(0,c.jsxs)("form",{onSubmit:ev,className:"p-6 space-y-4 overflow-y-auto custom-scrollbar",children:[(0,c.jsxs)("div",{className:"space-y-1",children:[(0,c.jsx)("label",{className:"text-[10px] font-bold text-slate-400 uppercase tracking-widest",children:"T\xean dự \xe1n"}),(0,c.jsx)("input",{required:!0,name:"name",className:"w-full px-4 py-2.5 border border-slate-200 rounded text-sm bg-slate-50 focus:bg-white",placeholder:"T\xean dự \xe1n..."})]}),(0,c.jsxs)("div",{className:"space-y-1",children:[(0,c.jsx)("label",{className:"text-[10px] font-bold text-slate-400 uppercase tracking-widest",children:"M\xf4 tả"}),(0,c.jsx)("textarea",{name:"description",rows:3,className:"w-full px-4 py-2.5 border border-slate-200 rounded text-sm bg-slate-50 focus:bg-white",placeholder:"M\xf4 tả dự \xe1n..."})]}),(0,c.jsx)(D,{users:Z,selectedIds:Y,onChange:Q,label:"Th\xe0nh vi\xean"}),(0,c.jsxs)("div",{className:"grid grid-cols-1 sm:grid-cols-2 gap-4",children:[(0,c.jsxs)("div",{className:"space-y-1",children:[(0,c.jsx)("label",{className:"text-[10px] font-bold text-slate-400 uppercase tracking-widest",children:"Ng\xe0y bắt đầu"}),(0,c.jsx)("input",{required:!0,name:"startDate",type:"date",className:"w-full px-4 py-2.5 border border-slate-200 rounded text-sm bg-slate-50",defaultValue:new Date().toISOString().split("T")[0]})]}),(0,c.jsxs)("div",{className:"space-y-1",children:[(0,c.jsx)("label",{className:"text-[10px] font-bold text-slate-400 uppercase tracking-widest",children:"Hạn b\xe0n giao"}),(0,c.jsx)("input",{required:!0,name:"deadline",type:"date",className:"w-full px-4 py-2.5 border border-slate-200 rounded text-sm bg-slate-50"})]})]}),(0,c.jsx)("button",{className:"w-full py-3.5 bg-primary text-white rounded font-black text-sm uppercase tracking-widest mt-2",children:"X\xe1c nhận dự \xe1n"})]})]})}),q&&(0,c.jsx)("div",{className:"fixed inset-0 z-[400] flex items-center justify-center bg-slate-900/60 backdrop-blur-sm p-4",onClick:()=>F(!1),children:(0,c.jsxs)("div",{className:"bg-white w-full max-w-xl rounded-lg shadow-2xl overflow-hidden modal-enter flex flex-col max-h-[90vh]",onClick:e=>e.stopPropagation(),children:[(0,c.jsxs)("div",{className:"px-6 py-4 bg-accent text-white flex justify-between items-center shrink-0",children:[(0,c.jsx)("h3",{className:"text-xs font-black uppercase tracking-widest",children:"Giao việc mới"}),(0,c.jsx)("button",{onClick:()=>F(!1),children:(0,c.jsx)(m,{className:"w-6 h-6"})})]}),(0,c.jsxs)("form",{onSubmit:ej,className:"p-6 space-y-4 overflow-y-auto custom-scrollbar",children:[(0,c.jsxs)("div",{className:"flex items-center justify-between p-3 bg-slate-50 rounded-lg border border-slate-100",children:[(0,c.jsxs)("div",{className:"flex items-center gap-3",children:[(0,c.jsx)(h,{className:"w-5 h-5 text-red-500"}),(0,c.jsx)("span",{className:"text-[10px] font-black text-slate-700 uppercase",children:"Chế độ b\xe1o lỗi (BUG)"})]}),(0,c.jsx)("input",{name:"isBug",type:"checkbox",className:"w-5 h-5 rounded accent-red-500"})]}),(0,c.jsxs)("div",{className:"space-y-1",children:[(0,c.jsx)("label",{className:"text-[10px] font-bold text-slate-400 uppercase tracking-widest",children:"Dự \xe1n"}),(0,c.jsxs)("select",{required:!0,name:"projectId",className:"w-full px-4 py-2.5 border border-slate-200 rounded text-sm bg-slate-50",children:[(0,c.jsx)("option",{value:"",children:"-- Lựa chọn dự \xe1n --"}),V.map(e=>(0,c.jsx)("option",{value:e.id,children:e.name},e.id))]})]}),(0,c.jsxs)("div",{className:"space-y-1",children:[(0,c.jsx)("label",{className:"text-[10px] font-bold text-slate-400 uppercase tracking-widest",children:"Ti\xeau đề"}),(0,c.jsx)("input",{required:!0,name:"title",className:"w-full px-4 py-2.5 border border-slate-200 rounded text-sm bg-slate-50",placeholder:"Cần l\xe0m g\xec..."})]}),(0,c.jsxs)("div",{className:"space-y-1",children:[(0,c.jsx)("label",{className:"text-[10px] font-bold text-slate-400 uppercase tracking-widest",children:"M\xf4 tả"}),(0,c.jsx)("textarea",{name:"description",rows:3,className:"w-full px-4 py-2.5 border border-slate-200 rounded text-sm bg-slate-50",placeholder:"Chi tiết quy tr\xecnh..."})]}),(0,c.jsxs)("div",{className:"space-y-3",children:[(0,c.jsxs)("label",{className:"text-[10px] font-bold text-slate-400 uppercase tracking-widest flex items-center gap-2",children:[(0,c.jsx)(k,{className:"w-4 h-4"})," Đ\xednh k\xe8m ảnh (",_.length,")"]}),(0,c.jsxs)("div",{className:"flex gap-2 overflow-x-auto pb-2 scrollbar-hide",children:[_.map((e,t)=>(0,c.jsxs)("div",{className:"relative w-20 h-20 shrink-0 rounded-md overflow-hidden border border-slate-200",children:[(0,c.jsx)("img",{src:e,className:"w-full h-full object-cover"}),(0,c.jsx)("button",{type:"button",onClick:()=>J(e=>e.filter((e,s)=>s!==t)),className:"absolute inset-0 bg-red-500/80 text-white flex items-center justify-center opacity-0 hover:opacity-100 transition-opacity",children:(0,c.jsx)(m,{className:"w-4 h-4"})})]},t)),(0,c.jsxs)("label",{className:"w-20 h-20 shrink-0 border-2 border-dashed border-slate-200 rounded-md flex flex-col items-center justify-center text-slate-300 hover:text-accent hover:border-accent cursor-pointer",children:[(0,c.jsx)(N,{className:"w-5 h-5"}),(0,c.jsx)("input",{type:"file",multiple:!0,accept:"image/*",className:"hidden",onChange:e=>{let t=e.target.files;t&&Promise.all(Array.from(t).map(e=>new Promise(t=>{let s=new FileReader;s.onloadend=()=>t(s.result),s.readAsDataURL(e)}))).then(e=>J(t=>[...t,...e]))}})]})]})]}),(0,c.jsxs)("div",{className:"grid grid-cols-1 sm:grid-cols-2 gap-4",children:[(0,c.jsxs)("div",{className:"space-y-1",children:[(0,c.jsx)("label",{className:"text-[10px] font-bold text-slate-400 uppercase tracking-widest",children:"Người thực hiện"}),(0,c.jsxs)("select",{required:!0,name:"assigneeId",className:"w-full px-4 py-2.5 border border-slate-200 rounded text-sm bg-slate-50",children:[(0,c.jsx)("option",{value:"",children:"-- Chọn --"}),Z.map(e=>(0,c.jsx)("option",{value:e.id,children:e.name},e.id))]})]}),(0,c.jsxs)("div",{className:"space-y-1",children:[(0,c.jsx)("label",{className:"text-[10px] font-bold text-slate-400 uppercase tracking-widest",children:"Hạn ch\xf3t"}),(0,c.jsx)("input",{required:!0,name:"deadline",type:"date",className:"w-full px-4 py-2.5 border border-slate-200 rounded text-sm bg-slate-50 text-red-500"})]})]}),(0,c.jsx)("button",{type:"submit",className:"w-full py-3.5 bg-accent text-white rounded font-black text-sm uppercase tracking-widest mt-2",children:"K\xedch hoạt quy tr\xecnh"})]})]})}),K&&(0,c.jsxs)("div",{className:"fixed inset-0 z-[500] flex flex-col bg-white modal-enter overflow-hidden",children:[(0,c.jsxs)("div",{className:"h-14 md:h-16 px-4 md:px-8 border-b border-slate-100 flex justify-between items-center bg-slate-50 shrink-0",children:[(0,c.jsxs)("div",{className:"flex items-center gap-2 md:gap-4",children:[(0,c.jsx)("button",{onClick:()=>X(null),className:"p-2 -ml-2 text-slate-400 hover:text-slate-900",children:(0,c.jsx)(w,{className:"w-5 h-5 md:w-6 md:h-6"})}),(0,c.jsx)("div",{className:"hidden sm:block h-4 w-[1px] bg-slate-300 mx-2"}),(0,c.jsxs)("div",{className:"flex items-center gap-2 truncate",children:[(0,c.jsx)("div",{className:"w-2.5 h-2.5 rounded-full shrink-0",style:{backgroundColor:null===(t=V.find(e=>e.id===K.projectId))||void 0===t?void 0:t.color}}),(0,c.jsx)("span",{className:"text-[9px] md:text-[11px] font-black text-slate-400 uppercase tracking-[0.2em] truncate",children:null===(s=V.find(e=>e.id===K.projectId))||void 0===s?void 0:s.name})]})]}),(0,c.jsxs)("div",{className:"flex items-center gap-1 md:gap-4",children:[(0,c.jsx)("button",{onClick:()=>{confirm("X\xf3a c\xf4ng việc n\xe0y?")&&eN(K.id)},className:"p-2 text-red-400 hover:bg-red-50 rounded-lg transition-all",children:(0,c.jsx)(y,{className:"w-5 h-5 md:w-6 md:h-6"})}),(0,c.jsx)("button",{onClick:()=>X(null),className:"p-2 text-slate-400 hover:bg-slate-100 rounded-lg transition-all",children:(0,c.jsx)(m,{className:"w-5 h-5 md:w-6 md:h-6"})})]})]}),(0,c.jsx)("div",{className:"flex-1 overflow-y-auto custom-scrollbar bg-white",children:(0,c.jsx)("div",{className:"max-w-5xl mx-auto w-full px-4 md:px-8 py-8 md:py-16",children:(0,c.jsxs)("div",{className:"grid grid-cols-1 lg:grid-cols-3 gap-8 md:gap-16",children:[(0,c.jsxs)("div",{className:"lg:col-span-2 space-y-8 md:space-y-12",children:[(0,c.jsxs)("div",{className:"space-y-4 md:space-y-6",children:[(0,c.jsxs)("div",{className:"flex gap-3 items-center flex-wrap",children:[(0,c.jsx)(eL,{task:K}),(0,c.jsx)("span",{className:"px-2 py-0.5 rounded text-[10px] font-black uppercase border ".concat(K.priority===d.HIGH?"bg-red-50 text-red-500 border-red-100":"bg-slate-50 text-slate-400 border-slate-100"),children:K.priority})]}),(0,c.jsx)("h2",{className:"text-3xl md:text-5xl font-black text-slate-900 leading-tight tracking-tight",children:K.title})]}),(0,c.jsxs)("div",{className:"space-y-4 md:space-y-6",children:[(0,c.jsx)("h4",{className:"text-[10px] md:text-xs font-black text-slate-900 uppercase tracking-[0.3em] border-l-4 border-primary pl-4 md:pl-5",children:"Nội dung y\xeau cầu"}),(0,c.jsx)("div",{className:"text-slate-600 leading-relaxed md:leading-[2] text-base md:text-lg whitespace-pre-wrap pl-4 md:pl-6",children:K.description||"Kh\xf4ng c\xf3 m\xf4 tả chi tiết cho nhiệm vụ n\xe0y."})]}),K.imageUrls&&K.imageUrls.length>0&&(0,c.jsxs)("div",{className:"space-y-4 md:space-y-6",children:[(0,c.jsxs)("h4",{className:"text-[10px] md:text-xs font-black text-slate-900 uppercase tracking-[0.3em] border-l-4 border-accent pl-4 md:pl-5",children:["H\xecnh ảnh đ\xednh k\xe8m (",K.imageUrls.length,")"]}),(0,c.jsx)("div",{className:"grid grid-cols-3 sm:grid-cols-4 md:grid-cols-5 lg:grid-cols-6 gap-2 md:gap-3 pl-4 md:pl-6",children:K.imageUrls.map((e,t)=>(0,c.jsxs)("div",{onClick:()=>ee(t),className:"group relative aspect-square rounded-xl overflow-hidden border border-slate-100 cursor-zoom-in hover:border-accent transition-all",children:[(0,c.jsx)("img",{src:e,className:"w-full h-full object-cover"}),(0,c.jsx)("div",{className:"absolute inset-0 bg-black/0 group-hover:bg-black/10 transition-colors flex items-center justify-center",children:(0,c.jsx)(N,{className:"w-5 h-5 text-white opacity-0 group-hover:opacity-100 transition-all"})})]},t))})]})]}),(0,c.jsx)("div",{className:"space-y-4 md:space-y-6 pb-20 md:pb-0",children:(0,c.jsxs)("div",{className:"bg-slate-50 p-6 md:p-8 rounded-2xl border border-slate-100 space-y-6 md:space-y-8",children:[(0,c.jsxs)("div",{children:[(0,c.jsx)("p",{className:"text-[9px] md:text-[10px] font-bold text-slate-400 uppercase tracking-widest mb-4",children:"Nh\xe2n sự phụ tr\xe1ch"}),(0,c.jsxs)("div",{className:"flex items-center gap-3 md:gap-4",children:[(0,c.jsx)("img",{src:null===(a=Z.find(e=>e.id===K.assigneeId))||void 0===a?void 0:a.avatar,className:"w-10 h-10 md:w-12 md:h-12 rounded-xl border border-white shadow-sm"}),(0,c.jsxs)("div",{children:[(0,c.jsx)("p",{className:"font-bold text-slate-900 text-sm md:text-base",children:null===(l=Z.find(e=>e.id===K.assigneeId))||void 0===l?void 0:l.name}),(0,c.jsx)("p",{className:"text-[9px] md:text-[10px] text-slate-400 font-bold uppercase",children:null===(r=Z.find(e=>e.id===K.assigneeId))||void 0===r?void 0:r.role})]})]})]}),(0,c.jsxs)("div",{className:"grid grid-cols-1 gap-4 md:gap-6 pt-6 border-t border-slate-200/60",children:[(0,c.jsxs)("div",{children:[(0,c.jsxs)("p",{className:"text-[9px] md:text-[10px] font-bold text-slate-400 uppercase tracking-widest mb-1 md:mb-2 flex items-center gap-2",children:[(0,c.jsx)(E,{className:"w-4 h-4"})," Thời hạn"]}),(0,c.jsx)("p",{className:"font-bold text-red-600 text-base md:text-lg",children:new Date(K.deadline||"").toLocaleDateString("vi-VN")})]}),(0,c.jsxs)("div",{children:[(0,c.jsxs)("p",{className:"text-[9px] md:text-[10px] font-bold text-slate-400 uppercase tracking-widest mb-1 md:mb-2 flex items-center gap-2",children:[(0,c.jsx)(C,{className:"w-4 h-4"})," Ng\xe0y khởi tạo"]}),(0,c.jsx)("p",{className:"font-bold text-slate-600 text-sm md:text-base",children:new Date(K.createdAt||"").toLocaleDateString("vi-VN")})]})]}),(0,c.jsx)("div",{className:"pt-4 md:pt-8",children:K.assigneeId===O.id&&K.status!==i.DONE?(0,c.jsxs)("button",{onClick:()=>ey(K),className:"w-full py-3 md:py-4 bg-emerald-600 text-white font-black text-[10px] md:text-sm rounded-xl shadow-lg hover:bg-emerald-700 transition-all flex items-center justify-center gap-3 uppercase tracking-widest",children:[(0,c.jsx)(x,{className:"w-5 h-5 md:w-6 md:h-6"})," Ho\xe0n th\xe0nh"]}):(0,c.jsxs)("div",{className:"p-3 md:p-4 bg-emerald-50 border border-emerald-100 rounded-xl flex items-center justify-center gap-3 text-emerald-700",children:[(0,c.jsx)(x,{className:"w-5 h-5"}),(0,c.jsx)("span",{className:"text-[10px] font-black uppercase tracking-widest",children:"Nhiệm vụ ho\xe0n tất"})]})})]})})]})})})]}),null!==$&&(null==K?void 0:K.imageUrls)&&(0,c.jsxs)("div",{className:"fixed inset-0 z-[600] flex items-center justify-center bg-black/95 backdrop-blur-md animate-in fade-in duration-300",children:[(0,c.jsx)("button",{onClick:()=>ee(null),className:"absolute top-4 right-4 md:top-8 md:right-8 z-[610] p-2 md:p-3 bg-white/10 hover:bg-white/20 text-white rounded-full transition-all",children:(0,c.jsx)(m,{className:"w-6 h-6 md:w-8 md:h-8"})}),(0,c.jsx)("button",{onClick:()=>ee(e=>e>0?e-1:K.imageUrls.length-1),className:"absolute left-2 md:left-8 p-3 md:p-4 bg-white/5 hover:bg-white/10 text-white rounded-full transition-all",children:(0,c.jsx)(w,{className:"w-8 h-8 md:w-10 md:h-10"})}),(0,c.jsx)("button",{onClick:()=>ee(e=>e<K.imageUrls.length-1?e+1:0),className:"absolute right-2 md:right-8 p-3 md:p-4 bg-white/5 hover:bg-white/10 text-white rounded-full transition-all",children:(0,c.jsx)(L,{className:"w-8 h-8 md:w-10 md:h-10"})}),(0,c.jsxs)("div",{className:"relative max-w-[95vw] md:max-w-[85vw] max-h-[85vh] select-none",children:[(0,c.jsx)("img",{src:K.imageUrls[$],className:"w-full h-full object-contain shadow-2xl animate-in zoom-in-90 duration-300",alt:"Lightbox view"}),(0,c.jsxs)("div",{className:"absolute -bottom-10 md:-bottom-12 left-1/2 -translate-x-1/2 flex items-center gap-4 text-white/60 font-black text-[10px] md:text-xs uppercase tracking-widest",children:[(0,c.jsx)("span",{children:$+1}),(0,c.jsx)("div",{className:"w-6 md:w-8 h-[1px] bg-white/20"}),(0,c.jsx)("span",{children:K.imageUrls.length})]})]})]})]}):(0,c.jsx)("div",{className:"min-h-screen bg-slate-900 flex items-center justify-center p-6",children:(0,c.jsxs)("div",{className:"bg-white w-full max-w-sm p-10 rounded-lg shadow-2xl modal-enter",children:[(0,c.jsxs)("div",{className:"text-center mb-10",children:[(0,c.jsx)("div",{className:"w-12 h-12 bg-slate-900 rounded-lg flex items-center justify-center text-white font-black mx-auto mb-4",children:"D"}),(0,c.jsx)("h1",{className:"text-xl font-bold text-slate-900 tracking-tight",children:"D-Line Workflows"}),(0,c.jsx)("p",{className:"text-xs text-slate-400 mt-1 uppercase font-bold tracking-widest",children:"Enterprise ERP"})]}),(0,c.jsxs)("form",{onSubmit:ew,className:"space-y-4",children:[(0,c.jsx)("input",{required:!0,name:"email",type:"email",placeholder:"Email",className:"w-full px-4 py-3 border border-slate-200 rounded text-sm bg-slate-50 focus:bg-white transition-all"}),(0,c.jsx)("input",{required:!0,name:"password",type:"password",placeholder:"Mật khẩu",className:"w-full px-4 py-3 border border-slate-200 rounded text-sm bg-slate-50 focus:bg-white transition-all"}),(0,c.jsx)("button",{className:"w-full py-3.5 bg-slate-900 text-white rounded font-bold text-sm hover:bg-slate-800 transition-all shadow-xl shadow-slate-900/10",children:"Đăng nhập"})]}),ex&&(0,c.jsx)("p",{className:"text-red-500 text-xs mt-4 text-center",children:ex}),0===Z.length&&(0,c.jsx)("p",{className:"text-[11px] text-slate-500 text-center mt-4",children:"Chưa c\xf3 user trong DB. Tạo mới bằng API /api/users (POST) rồi đăng nhập."})]})})}}},function(e){e.O(0,[971,117,744],function(){return e(e.s=3298)}),_N_E=e.O()}]);