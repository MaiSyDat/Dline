(()=>{var e={};e.id=931,e.ids=[931],e.modules={2934:e=>{"use strict";e.exports=require("next/dist/client/components/action-async-storage.external.js")},4580:e=>{"use strict";e.exports=require("next/dist/client/components/request-async-storage.external.js")},5869:e=>{"use strict";e.exports=require("next/dist/client/components/static-generation-async-storage.external.js")},399:e=>{"use strict";e.exports=require("next/dist/compiled/next-server/app-page.runtime.prod.js")},9222:(e,t,s)=>{"use strict";s.r(t),s.d(t,{GlobalError:()=>n.a,__next_app__:()=>x,originalPathname:()=>m,pages:()=>o,routeModule:()=>h,tree:()=>c}),s(4050),s(4403),s(996);var a=s(170),l=s(5002),r=s(3876),n=s.n(r),i=s(6299),d={};for(let e in i)0>["default","tree","pages","GlobalError","originalPathname","__next_app__","routeModule"].indexOf(e)&&(d[e]=()=>i[e]);s.d(t,d);let c=["",{children:["__PAGE__",{},{page:[()=>Promise.resolve().then(s.bind(s,4050)),"D:\\CODE\\NextJS\\d-line\\app\\page.tsx"]}]},{layout:[()=>Promise.resolve().then(s.bind(s,4403)),"D:\\CODE\\NextJS\\d-line\\app\\layout.tsx"],"not-found":[()=>Promise.resolve().then(s.t.bind(s,996,23)),"next/dist/client/components/not-found-error"]}],o=["D:\\CODE\\NextJS\\d-line\\app\\page.tsx"],m="/page",x={require:s,loadChunk:()=>Promise.resolve()},h=new a.AppPageRouteModule({definition:{kind:l.x.APP_PAGE,page:"/page",pathname:"/",bundlePath:"",filename:"",appPaths:[]},userland:{loaderTree:c}})},2641:()=>{},8099:(e,t,s)=>{Promise.resolve().then(s.bind(s,299))},8644:(e,t,s)=>{Promise.resolve().then(s.t.bind(s,3642,23)),Promise.resolve().then(s.t.bind(s,7586,23)),Promise.resolve().then(s.t.bind(s,7838,23)),Promise.resolve().then(s.t.bind(s,8057,23)),Promise.resolve().then(s.t.bind(s,7741,23)),Promise.resolve().then(s.t.bind(s,3118,23))},299:(e,t,s)=>{"use strict";s.d(t,{default:()=>L});var a,l,r,n=s(7247),i=s(8964);let d=i.forwardRef(function({title:e,titleId:t,...s},a){return i.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor","aria-hidden":"true","data-slot":"icon",ref:a,"aria-labelledby":t},s),e?i.createElement("title",{id:t},e):null,i.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M6 18 18 6M6 6l12 12"}))}),c=i.forwardRef(function({title:e,titleId:t,...s},a){return i.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor","aria-hidden":"true","data-slot":"icon",ref:a,"aria-labelledby":t},s),e?i.createElement("title",{id:t},e):null,i.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"m4.5 12.75 6 6 9-13.5"}))}),o=i.forwardRef(function({title:e,titleId:t,...s},a){return i.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor","aria-hidden":"true","data-slot":"icon",ref:a,"aria-labelledby":t},s),e?i.createElement("title",{id:t},e):null,i.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M12 12.75c1.148 0 2.278.08 3.383.237 1.037.146 1.866.966 1.866 2.013 0 3.728-2.35 6.75-5.25 6.75S6.75 18.728 6.75 15c0-1.046.83-1.867 1.866-2.013A24.204 24.204 0 0 1 12 12.75Zm0 0c2.883 0 5.647.508 8.207 1.44a23.91 23.91 0 0 1-1.152 6.06M12 12.75c-2.883 0-5.647.508-8.208 1.44.125 2.104.52 4.136 1.153 6.06M12 12.75a2.25 2.25 0 0 0 2.248-2.354M12 12.75a2.25 2.25 0 0 1-2.248-2.354M12 8.25c.995 0 1.971-.08 2.922-.236.403-.066.74-.358.795-.762a3.778 3.778 0 0 0-.399-2.25M12 8.25c-.995 0-1.97-.08-2.922-.236-.402-.066-.74-.358-.795-.762a3.734 3.734 0 0 1 .4-2.253M12 8.25a2.25 2.25 0 0 0-2.248 2.146M12 8.25a2.25 2.25 0 0 1 2.248 2.146M8.683 5a6.032 6.032 0 0 1-1.155-1.002c.07-.63.27-1.222.574-1.747m.581 2.749A3.75 3.75 0 0 1 15.318 5m0 0c.427-.283.815-.62 1.155-.999a4.471 4.471 0 0 0-.575-1.752M4.921 6a24.048 24.048 0 0 0-.392 3.314c1.668.546 3.416.914 5.223 1.082M19.08 6c.205 1.08.337 2.187.392 3.314a23.882 23.882 0 0 1-5.223 1.082"}))}),m=i.forwardRef(function({title:e,titleId:t,...s},a){return i.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor","aria-hidden":"true","data-slot":"icon",ref:a,"aria-labelledby":t},s),e?i.createElement("title",{id:t},e):null,i.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"m2.25 12 8.954-8.955c.44-.439 1.152-.439 1.591 0L21.75 12M4.5 9.75v10.125c0 .621.504 1.125 1.125 1.125H9.75v-4.875c0-.621.504-1.125 1.125-1.125h2.25c.621 0 1.125.504 1.125 1.125V21h4.125c.621 0 1.125-.504 1.125-1.125V9.75M8.25 21h8.25"}))}),x=i.forwardRef(function({title:e,titleId:t,...s},a){return i.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor","aria-hidden":"true","data-slot":"icon",ref:a,"aria-labelledby":t},s),e?i.createElement("title",{id:t},e):null,i.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M20.25 14.15v4.25c0 1.094-.787 2.036-1.872 2.18-2.087.277-4.216.42-6.378.42s-4.291-.143-6.378-.42c-1.085-.144-1.872-1.086-1.872-2.18v-4.25m16.5 0a2.18 2.18 0 0 0 .75-1.661V8.706c0-1.081-.768-2.015-1.837-2.175a48.114 48.114 0 0 0-3.413-.387m4.5 8.006c-.194.165-.42.295-.673.38A23.978 23.978 0 0 1 12 15.75c-2.648 0-5.195-.429-7.577-1.22a2.016 2.016 0 0 1-.673-.38m0 0A2.18 2.18 0 0 1 3 12.489V8.706c0-1.081.768-2.015 1.837-2.175a48.111 48.111 0 0 1 3.413-.387m7.5 0V5.25A2.25 2.25 0 0 0 13.5 3h-3a2.25 2.25 0 0 0-2.25 2.25v.894m7.5 0a48.667 48.667 0 0 0-7.5 0M12 12.75h.008v.008H12v-.008Z"}))}),h=i.forwardRef(function({title:e,titleId:t,...s},a){return i.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor","aria-hidden":"true","data-slot":"icon",ref:a,"aria-labelledby":t},s),e?i.createElement("title",{id:t},e):null,i.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M3.75 6A2.25 2.25 0 0 1 6 3.75h2.25A2.25 2.25 0 0 1 10.5 6v2.25a2.25 2.25 0 0 1-2.25 2.25H6a2.25 2.25 0 0 1-2.25-2.25V6ZM3.75 15.75A2.25 2.25 0 0 1 6 13.5h2.25a2.25 2.25 0 0 1 2.25 2.25V18a2.25 2.25 0 0 1-2.25 2.25H6A2.25 2.25 0 0 1 3.75 18v-2.25ZM13.5 6a2.25 2.25 0 0 1 2.25-2.25H18A2.25 2.25 0 0 1 20.25 6v2.25A2.25 2.25 0 0 1 18 10.5h-2.25a2.25 2.25 0 0 1-2.25-2.25V6ZM13.5 15.75a2.25 2.25 0 0 1 2.25-2.25H18a2.25 2.25 0 0 1 2.25 2.25V18A2.25 2.25 0 0 1 18 20.25h-2.25A2.25 2.25 0 0 1 13.5 18v-2.25Z"}))}),p=i.forwardRef(function({title:e,titleId:t,...s},a){return i.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor","aria-hidden":"true","data-slot":"icon",ref:a,"aria-labelledby":t},s),e?i.createElement("title",{id:t},e):null,i.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M18 18.72a9.094 9.094 0 0 0 3.741-.479 3 3 0 0 0-4.682-2.72m.94 3.198.001.031c0 .225-.012.447-.037.666A11.944 11.944 0 0 1 12 21c-2.17 0-4.207-.576-5.963-1.584A6.062 6.062 0 0 1 6 18.719m12 0a5.971 5.971 0 0 0-.941-3.197m0 0A5.995 5.995 0 0 0 12 12.75a5.995 5.995 0 0 0-5.058 2.772m0 0a3 3 0 0 0-4.681 2.72 8.986 8.986 0 0 0 3.74.477m.94-3.197a5.971 5.971 0 0 0-.94 3.197M15 6.75a3 3 0 1 1-6 0 3 3 0 0 1 6 0Zm6 3a2.25 2.25 0 1 1-4.5 0 2.25 2.25 0 0 1 4.5 0Zm-13.5 0a2.25 2.25 0 1 1-4.5 0 2.25 2.25 0 0 1 4.5 0Z"}))}),u=i.forwardRef(function({title:e,titleId:t,...s},a){return i.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor","aria-hidden":"true","data-slot":"icon",ref:a,"aria-labelledby":t},s),e?i.createElement("title",{id:t},e):null,i.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M15.75 9V5.25A2.25 2.25 0 0 0 13.5 3h-6a2.25 2.25 0 0 0-2.25 2.25v13.5A2.25 2.25 0 0 0 7.5 21h6a2.25 2.25 0 0 0 2.25-2.25V15m3 0 3-3m0 0-3-3m3 3H9"}))}),b=i.forwardRef(function({title:e,titleId:t,...s},a){return i.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor","aria-hidden":"true","data-slot":"icon",ref:a,"aria-labelledby":t},s),e?i.createElement("title",{id:t},e):null,i.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M15.75 19.5 8.25 12l7.5-7.5"}))}),g=i.forwardRef(function({title:e,titleId:t,...s},a){return i.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor","aria-hidden":"true","data-slot":"icon",ref:a,"aria-labelledby":t},s),e?i.createElement("title",{id:t},e):null,i.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"m21 21-5.197-5.197m0 0A7.5 7.5 0 1 0 5.196 5.196a7.5 7.5 0 0 0 10.607 10.607Z"}))}),f=i.forwardRef(function({title:e,titleId:t,...s},a){return i.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor","aria-hidden":"true","data-slot":"icon",ref:a,"aria-labelledby":t},s),e?i.createElement("title",{id:t},e):null,i.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M12 10.5v6m3-3H9m4.06-7.19-2.12-2.12a1.5 1.5 0 0 0-1.061-.44H4.5A2.25 2.25 0 0 0 2.25 6v12a2.25 2.25 0 0 0 2.25 2.25h15A2.25 2.25 0 0 0 21.75 18V9a2.25 2.25 0 0 0-2.25-2.25h-5.379a1.5 1.5 0 0 1-1.06-.44Z"}))}),w=i.forwardRef(function({title:e,titleId:t,...s},a){return i.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor","aria-hidden":"true","data-slot":"icon",ref:a,"aria-labelledby":t},s),e?i.createElement("title",{id:t},e):null,i.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M12 4.5v15m7.5-7.5h-15"}))}),j=i.forwardRef(function({title:e,titleId:t,...s},a){return i.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor","aria-hidden":"true","data-slot":"icon",ref:a,"aria-labelledby":t},s),e?i.createElement("title",{id:t},e):null,i.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"m2.25 15.75 5.159-5.159a2.25 2.25 0 0 1 3.182 0l5.159 5.159m-1.5-1.5 1.409-1.409a2.25 2.25 0 0 1 3.182 0l2.909 2.909m-18 3.75h16.5a1.5 1.5 0 0 0 1.5-1.5V6a1.5 1.5 0 0 0-1.5-1.5H3.75A1.5 1.5 0 0 0 2.25 6v12a1.5 1.5 0 0 0 1.5 1.5Zm10.5-11.25h.008v.008h-.008V8.25Zm.375 0a.375.375 0 1 1-.75 0 .375.375 0 0 1 .75 0Z"}))}),v=i.forwardRef(function({title:e,titleId:t,...s},a){return i.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor","aria-hidden":"true","data-slot":"icon",ref:a,"aria-labelledby":t},s),e?i.createElement("title",{id:t},e):null,i.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"m14.74 9-.346 9m-4.788 0L9.26 9m9.968-3.21c.342.052.682.107 1.022.166m-1.022-.165L18.16 19.673a2.25 2.25 0 0 1-2.244 2.077H8.084a2.25 2.25 0 0 1-2.244-2.077L4.772 5.79m14.456 0a48.108 48.108 0 0 0-3.478-.397m-12 .562c.34-.059.68-.114 1.022-.165m0 0a48.11 48.11 0 0 1 3.478-.397m7.5 0v-.916c0-1.18-.91-2.164-2.09-2.201a51.964 51.964 0 0 0-3.32 0c-1.18.037-2.09 1.022-2.09 2.201v.916m7.5 0a48.667 48.667 0 0 0-7.5 0"}))}),N=i.forwardRef(function({title:e,titleId:t,...s},a){return i.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor","aria-hidden":"true","data-slot":"icon",ref:a,"aria-labelledby":t},s),e?i.createElement("title",{id:t},e):null,i.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M12 6v6h4.5m4.5 0a9 9 0 1 1-18 0 9 9 0 0 1 18 0Z"}))}),k=i.forwardRef(function({title:e,titleId:t,...s},a){return i.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor","aria-hidden":"true","data-slot":"icon",ref:a,"aria-labelledby":t},s),e?i.createElement("title",{id:t},e):null,i.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M6.75 3v2.25M17.25 3v2.25M3 18.75V7.5a2.25 2.25 0 0 1 2.25-2.25h13.5A2.25 2.25 0 0 1 21 7.5v11.25m-18 0A2.25 2.25 0 0 0 5.25 21h13.5A2.25 2.25 0 0 0 21 18.75m-18 0v-7.5A2.25 2.25 0 0 1 5.25 9h13.5A2.25 2.25 0 0 1 21 11.25v7.5m-9-6h.008v.008H12v-.008ZM12 15h.008v.008H12V15Zm0 2.25h.008v.008H12v-.008ZM9.75 15h.008v.008H9.75V15Zm0 2.25h.008v.008H9.75v-.008ZM7.5 15h.008v.008H7.5V15Zm0 2.25h.008v.008H7.5v-.008Zm6.75-4.5h.008v.008h-.008v-.008Zm0 2.25h.008v.008h-.008V15Zm0 2.25h.008v.008h-.008v-.008Zm2.25-4.5h.008v.008H16.5v-.008Zm0 2.25h.008v.008H16.5V15Z"}))}),y=i.forwardRef(function({title:e,titleId:t,...s},a){return i.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor","aria-hidden":"true","data-slot":"icon",ref:a,"aria-labelledby":t},s),e?i.createElement("title",{id:t},e):null,i.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"m8.25 4.5 7.5 7.5-7.5 7.5"}))});(function(e){e.ADMIN="admin",e.MANAGER="manager",e.EMPLOYEE="employee"})(a||(a={})),function(e){e.NEW="new",e.BUG="bug",e.IN_PROGRESS="in-progress",e.FIXED="fixed",e.DONE="done"}(l||(l={})),function(e){e.LOW="low",e.MEDIUM="medium",e.HIGH="high"}(r||(r={}));let E=async(e,t)=>{let s=await fetch(e,t),a=await s.json();if(!s.ok||a?.ok===!1)throw Error(a?.error||s.statusText);return a},C=({users:e,selectedIds:t,onChange:s,label:a})=>{let[l,r]=(0,i.useState)(""),[o,m]=(0,i.useState)(!1),x=(0,i.useRef)(null);(0,i.useEffect)(()=>{let e=e=>{x.current&&!x.current.contains(e.target)&&m(!1)};return document.addEventListener("mousedown",e),()=>document.removeEventListener("mousedown",e)},[]);let h=e.filter(e=>e.name.toLowerCase().includes(l.toLowerCase()));return(0,n.jsxs)("div",{className:"relative space-y-1",ref:x,children:[n.jsx("label",{className:"text-[10px] font-bold text-slate-400 uppercase tracking-widest ml-0.5",children:a}),(0,n.jsxs)("div",{className:"w-full min-h-[42px] p-1.5 border border-slate-200 rounded-md bg-white flex flex-wrap gap-1.5 cursor-pointer hover:border-accent transition-colors",onClick:()=>m(!o),children:[0===t.length&&n.jsx("span",{className:"text-slate-400 text-sm py-1 px-2",children:"T\xecm kiếm & Chọn nh\xe2n sự..."}),t.map(a=>{let l=e.find(e=>e.id===a);return(0,n.jsxs)("div",{className:"bg-slate-50 text-slate-700 px-2 py-0.5 rounded border border-slate-200 flex items-center gap-1.5 text-xs font-bold",children:[n.jsx("img",{src:l?.avatar,className:"w-4 h-4 rounded-full"}),l?.name,n.jsx(d,{className:"w-3 h-3 cursor-pointer hover:text-red-500",onClick:e=>{e.stopPropagation(),s(t.filter(e=>e!==a))}})]},a)})]}),o&&(0,n.jsxs)("div",{className:"absolute z-[250] top-full left-0 w-full mt-1 bg-white border border-slate-200 rounded-md shadow-2xl max-h-60 overflow-y-auto custom-scrollbar modal-enter",children:[n.jsx("div",{className:"p-2 sticky top-0 bg-white border-b border-slate-100",children:n.jsx("input",{autoFocus:!0,className:"w-full px-3 py-2 text-sm border-none focus:ring-0",placeholder:"Nhập t\xean...",value:l,onChange:e=>r(e.target.value),onClick:e=>e.stopPropagation()})}),h.map(e=>(0,n.jsxs)("div",{className:`p-3 text-sm flex items-center gap-3 cursor-pointer hover:bg-slate-50 ${t.includes(e.id)?"bg-blue-50 text-blue-600":""}`,onClick:a=>{a.stopPropagation(),t.includes(e.id)?s(t.filter(t=>t!==e.id)):s([...t,e.id])},children:[n.jsx("img",{src:e.avatar,className:"w-6 h-6 rounded-full"}),n.jsx("div",{className:"flex-1 font-medium",children:e.name}),t.includes(e.id)&&n.jsx(c,{className:"w-4 h-4"})]},e.id))]})]})},D=[{id:"overdue",label:"Qu\xe1 hạn",color:"#EF4444"},{id:"today",label:"H\xf4m nay",color:"#10B981"},{id:"thisWeek",label:"Tuần n\xe0y",color:"#3B82F6"},{id:"later",label:"Sắp tới",color:"#6366F1"},{id:"done",label:"Đ\xe3 xong",color:"#94A3B8"}],L=()=>{let[e,t]=(0,i.useState)(null),[s,L]=(0,i.useState)("dashboard"),[M,S]=(0,i.useState)([]),[A,O]=(0,i.useState)([]),[P,T]=(0,i.useState)([]),[H,I]=(0,i.useState)(null),[B,R]=(0,i.useState)(!1),[V,Z]=(0,i.useState)(!1),[q,W]=(0,i.useState)(null),[U,G]=(0,i.useState)([]),[$,_]=(0,i.useState)([]),[F,z]=(0,i.useState)(null),J=(0,i.useRef)(null),[K,X]=(0,i.useState)(!1),[Y,Q]=(0,i.useState)(0),[ee,et]=(0,i.useState)(0),[es,ea]=(0,i.useState)(!0),[el,er]=(0,i.useState)(null),[en,ei]=(0,i.useState)(null),[ed,ec]=(0,i.useState)(!1),[eo,em]=(0,i.useState)(!1);(0,i.useEffect)(()=>{(async()=>{try{ea(!0);let[{data:e},{data:t},{data:s}]=await Promise.all([E("/api/users"),E("/api/projects"),E("/api/tasks")]);T(e),O(t),S(s),er(null)}catch(e){er(e instanceof Error?e.message:"Kh\xf4ng tải được dữ liệu")}finally{ea(!1)}})()},[]);let ex=()=>X(!1),eh=async e=>{e.preventDefault();let s=new FormData(e.currentTarget);ei(null);try{let e=await E("/api/users/login",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({email:s.get("email"),password:s.get("password")})});t(e.data)}catch(e){ei(e instanceof Error?e.message:"Đăng nhập thất bại")}},ep=async e=>{if(e.preventDefault(),ed)return;ec(!0);let t=new FormData(e.currentTarget);try{let e={projectId:t.get("projectId"),title:t.get("title"),description:t.get("description"),assigneeId:t.get("assigneeId"),startDate:t.get("startDate"),deadline:t.get("deadline"),status:"on"===t.get("isBug")?l.BUG:l.NEW,priority:t.get("priority")||r.MEDIUM,imageUrls:U.length>0?U:void 0},s=await E("/api/tasks",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(e)});S(e=>[...e,s.data]),R(!1),G([])}catch(e){alert(e instanceof Error?e.message:"Kh\xf4ng tạo được c\xf4ng việc")}finally{ec(!1)}},eu=async t=>{if(t.preventDefault(),ed)return;ec(!0);let s=new FormData(t.currentTarget);try{let t={name:s.get("name"),description:s.get("description"),memberIds:$,startDate:s.get("startDate"),deadline:s.get("deadline"),managerId:e?.id,status:"active"},a=await E("/api/projects",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(t)});O(e=>[...e,a.data]),Z(!1),_([])}catch(e){alert(e instanceof Error?e.message:"Kh\xf4ng tạo được dự \xe1n")}finally{ec(!1)}},eb=async e=>{try{await E("/api/tasks/"+e,{method:"DELETE"}),S(t=>t.filter(t=>t.id!==e)),W(null)}catch(e){alert(e instanceof Error?e.message:"Kh\xf4ng x\xf3a được c\xf4ng việc")}},eg=async e=>{if(e.preventDefault(),ed)return;ec(!0);let t=new FormData(e.currentTarget),s={name:t.get("name"),email:t.get("email"),password:t.get("password"),role:t.get("role")||a.EMPLOYEE,avatar:t.get("avatar")||void 0};try{let e=await E("/api/users",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(s)});T(t=>[...t,e.data]),em(!1)}catch(e){alert(e instanceof Error?e.message:"Kh\xf4ng tạo được nh\xe2n sự")}finally{ec(!1)}},ef=async e=>{try{let t=await E("/api/tasks/"+e.id,{method:"PUT",headers:{"Content-Type":"application/json"},body:JSON.stringify({status:l.DONE})});S(s=>s.map(s=>s.id===e.id?t.data:s)),W(null)}catch(e){alert(e instanceof Error?e.message:"Kh\xf4ng cập nhật được c\xf4ng việc")}},ew=(0,i.useMemo)(()=>H?M.filter(e=>e.projectId===H):M,[M,H]),ej=(0,i.useMemo)(()=>{let e={overdue:[],today:[],thisWeek:[],later:[],done:[]},t=new Date;return t.setHours(0,0,0,0),ew.forEach(s=>{if(s.status===l.DONE){e.done.push(s);return}if(!s.deadline){e.later.push(s);return}let a=new Date(s.deadline);a.setHours(0,0,0,0);let r=Math.floor((a.getTime()-t.getTime())/864e5);r<0?e.overdue.push(s):0===r?e.today.push(s):r>0&&r<=7?e.thisWeek.push(s):e.later.push(s)}),e},[ew]),ev=({task:e})=>e.status===l.BUG?(0,n.jsxs)("span",{className:"bg-red-50 text-red-500 px-2 py-0.5 rounded text-[9px] font-black border border-red-100 flex items-center gap-1 uppercase",children:[n.jsx(o,{className:"w-3 h-3"})," Lỗi"]}):e.status===l.DONE?n.jsx("span",{className:"bg-emerald-50 text-emerald-600 px-2 py-0.5 rounded text-[9px] font-black border border-emerald-100 uppercase tracking-wider",children:"Xong"}):n.jsx("span",{className:"bg-slate-50 text-slate-500 px-2 py-0.5 rounded text-[9px] font-black border border-slate-100 uppercase tracking-wider",children:e.status});return es?n.jsx("div",{className:"min-h-screen flex items-center justify-center bg-slate-900 text-white",children:(0,n.jsxs)("div",{className:"text-center space-y-2",children:[n.jsx("div",{className:"w-12 h-12 mx-auto border-2 border-white/20 border-t-white rounded-full animate-spin"}),n.jsx("p",{className:"text-sm",children:"Đang tải dữ liệu..."}),el&&n.jsx("p",{className:"text-red-300 text-xs",children:el})]})}):e?(0,n.jsxs)("div",{className:"flex h-screen bg-[#F8FAFC] overflow-hidden relative",children:[(0,n.jsxs)("aside",{className:"hidden md:flex w-64 bg-primary flex-col shrink-0",children:[(0,n.jsxs)("div",{className:"p-8 flex items-center gap-3 border-b border-white/5",children:[n.jsx("div",{className:"w-8 h-8 bg-accent rounded flex items-center justify-center text-white font-black",children:"D"}),n.jsx("span",{className:"text-white font-bold tracking-tight",children:"D-LINE PRO"})]}),(0,n.jsxs)("nav",{className:"flex-1 px-4 py-6 space-y-1 overflow-y-auto no-scrollbar",children:[(0,n.jsxs)("button",{onClick:()=>{L("dashboard"),I(null)},className:`w-full flex items-center gap-3 px-4 py-3 rounded-md text-sm font-medium transition-all ${"dashboard"===s?"bg-white/10 text-white shadow-inner":"text-slate-400 hover:text-white hover:bg-white/5"}`,children:[n.jsx(m,{className:"w-5 h-5"})," Tổng quan"]}),(0,n.jsxs)("button",{onClick:()=>{L("projects"),I(null)},className:`w-full flex items-center gap-3 px-4 py-3 rounded-md text-sm font-medium transition-all ${"projects"===s?"bg-white/10 text-white shadow-inner":"text-slate-400 hover:text-white hover:bg-white/5"}`,children:[n.jsx(x,{className:"w-5 h-5"})," Dự \xe1n"]}),(0,n.jsxs)("button",{onClick:()=>{L("tasks"),I(null)},className:`w-full flex items-center gap-3 px-4 py-3 rounded-md text-sm font-medium transition-all ${"tasks"===s?"bg-white/10 text-white shadow-inner":"text-slate-400 hover:text-white hover:bg-white/5"}`,children:[n.jsx(h,{className:"w-5 h-5"})," C\xf4ng việc"]}),(0,n.jsxs)("button",{onClick:()=>{L("team"),I(null)},className:`w-full flex items-center gap-3 px-4 py-3 rounded-md text-sm font-medium transition-all ${"team"===s?"bg-white/10 text-white shadow-inner":"text-slate-400 hover:text-white hover:bg-white/5"}`,children:[n.jsx(p,{className:"w-5 h-5"})," Nh\xe2n sự"]}),n.jsx("div",{className:"pt-8 px-4 pb-2",children:n.jsx("span",{className:"text-[10px] font-bold text-slate-600 uppercase tracking-widest",children:"Dự \xe1n tham gia"})}),n.jsx("div",{className:"space-y-0.5",children:A.map(e=>(0,n.jsxs)("button",{onClick:()=>{I(e.id),L("tasks")},className:`w-full flex items-center gap-3 px-4 py-2 rounded text-xs transition-all ${H===e.id?"text-white font-bold bg-white/5":"text-slate-500 hover:text-white"}`,children:[n.jsx("div",{className:"w-1.5 h-1.5 rounded-full",style:{backgroundColor:e.color}})," ",e.name]},e.id))})]}),(0,n.jsxs)("div",{className:"p-4 bg-[#0A0F1E] flex items-center gap-3",children:[n.jsx("img",{src:e.avatar,className:"w-9 h-9 rounded-full border border-white/10",alt:""}),(0,n.jsxs)("div",{className:"flex-1 min-w-0",children:[n.jsx("p",{className:"text-xs text-white font-bold truncate",children:e.name}),n.jsx("p",{className:"text-[9px] text-slate-500 uppercase font-black",children:e.role})]}),n.jsx("button",{onClick:()=>{t(null),L("dashboard"),I(null)},className:"p-2 text-slate-500 hover:text-red-400 transition-colors",children:n.jsx(u,{className:"w-5 h-5"})})]})]}),(0,n.jsxs)("main",{className:"flex-1 flex flex-col min-w-0 overflow-hidden",children:[(0,n.jsxs)("header",{className:"h-16 bg-white border-b border-slate-200 flex items-center justify-between px-4 md:px-10 shrink-0",children:[(0,n.jsxs)("div",{className:"flex items-center gap-3",children:[H&&n.jsx("button",{onClick:()=>I(null),className:"p-2 -ml-2 text-slate-400 hover:text-slate-900 transition-colors",children:n.jsx(b,{className:"w-5 h-5"})}),n.jsx("h2",{className:"text-xs md:text-sm font-black text-slate-900 uppercase tracking-[0.2em]",children:H?A.find(e=>e.id===H)?.name:s})]}),(0,n.jsxs)("div",{className:"flex items-center gap-2 md:gap-4",children:[(0,n.jsxs)("div",{className:"relative group hidden sm:block",children:[n.jsx(g,{className:"w-4 h-4 absolute left-3 top-1/2 -translate-y-1/2 text-slate-400 group-focus-within:text-accent transition-colors"}),n.jsx("input",{type:"text",placeholder:"T\xecm kiếm...",className:"bg-slate-100 border-none rounded-md pl-9 pr-4 py-2 text-xs w-32 md:w-72 focus:w-40 md:focus:w-72 focus:bg-white focus:ring-1 focus:ring-accent transition-all"})]}),"projects"===s&&(0,n.jsxs)("button",{onClick:()=>Z(!0),className:"bg-primary text-white p-2 md:px-4 md:py-2 rounded md:rounded-md text-xs font-bold flex items-center gap-2 hover:bg-slate-800 transition-all",children:[n.jsx(f,{className:"w-5 h-5 md:w-4 md:h-4"}),n.jsx("span",{className:"hidden md:inline",children:"Dự \xe1n mới"})]}),"team"===s&&(0,n.jsxs)("button",{onClick:()=>em(!0),className:"bg-primary text-white p-2 md:px-4 md:py-2 rounded md:rounded-md text-xs font-bold flex items-center gap-2 hover:bg-slate-800 transition-all",children:[n.jsx(w,{className:"w-5 h-5 md:w-4 md:h-4"}),n.jsx("span",{className:"hidden md:inline",children:"Nh\xe2n sự mới"})]}),("tasks"===s||H)&&(0,n.jsxs)("button",{onClick:()=>R(!0),className:"bg-accent text-white p-2 md:px-4 md:py-2 rounded md:rounded-md text-xs font-bold flex items-center gap-2 hover:bg-blue-600 shadow-lg shadow-blue-500/20 active:scale-95 transition-all",children:[n.jsx(w,{className:"w-5 h-5 md:w-4 md:h-4"}),n.jsx("span",{className:"hidden md:inline",children:"Giao việc mới"})]})]})]}),(0,n.jsxs)("div",{className:"flex-1 overflow-y-auto custom-scrollbar p-4 md:p-10 pb-24 md:pb-10",children:["dashboard"===s&&(0,n.jsxs)("div",{className:"space-y-6 md:space-y-10 modal-enter max-w-7xl mx-auto",children:[n.jsx("div",{className:"grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-4 gap-4 md:gap-6",children:[{label:"Dự \xe1n đang chạy",val:A.length,icon:x,color:"text-slate-900",bg:"bg-white"},{label:"Tổng c\xf4ng việc",val:M.length,icon:h,color:"text-blue-600",bg:"bg-white"},{label:"Việc ho\xe0n th\xe0nh",val:M.filter(e=>e.status===l.DONE).length,icon:c,color:"text-emerald-600",bg:"bg-white"},{label:"Tổng lỗi (Bugs)",val:M.filter(e=>e.status===l.BUG).length,icon:o,color:"text-red-500",bg:"bg-white"}].map((e,t)=>(0,n.jsxs)("div",{className:`${e.bg} p-6 md:p-8 rounded-lg border border-slate-200 shadow-sm flex flex-col items-center text-center group hover:border-accent transition-all`,children:[n.jsx("div",{className:"w-10 h-10 md:w-12 md:h-12 rounded-full bg-slate-50 flex items-center justify-center mb-4 group-hover:scale-110 transition-transform",children:n.jsx(e.icon,{className:`w-5 h-5 md:w-6 md:h-6 ${e.color}`})}),n.jsx("p",{className:"text-2xl md:text-3xl font-black text-slate-900",children:e.val}),n.jsx("p",{className:"text-[9px] md:text-[10px] font-bold text-slate-400 uppercase mt-1 tracking-widest",children:e.label})]},t))}),(0,n.jsxs)("div",{className:"bg-white p-6 md:p-8 rounded-lg border border-slate-200 shadow-sm",children:[(0,n.jsxs)("div",{className:"flex justify-between items-center mb-6 md:mb-8",children:[n.jsx("h3",{className:"font-black text-slate-900 text-[10px] md:text-sm uppercase tracking-widest",children:"T\xecnh trạng c\xf4ng việc gần nhất"}),n.jsx("button",{className:"text-[9px] md:text-[10px] font-bold text-accent hover:underline uppercase",children:"Tất cả"})]}),n.jsx("div",{className:"divide-y divide-slate-50",children:M.filter(e=>e.status!==l.DONE).slice(0,5).map(e=>(0,n.jsxs)("div",{onClick:()=>W(e),className:"flex items-center justify-between py-4 md:py-5 hover:bg-slate-50 px-2 md:px-4 md:-mx-4 transition-all cursor-pointer group rounded-md",children:[(0,n.jsxs)("div",{className:"flex items-center gap-3 md:gap-5 min-w-0",children:[n.jsx(ev,{task:e}),n.jsx("p",{className:"text-xs md:text-sm font-bold text-slate-700 truncate group-hover:text-accent",children:e.title})]}),(0,n.jsxs)("div",{className:"flex items-center gap-4 md:gap-8 shrink-0",children:[(0,n.jsxs)("div",{className:"text-right hidden sm:block",children:[n.jsx("p",{className:"text-[9px] font-black text-slate-300 uppercase",children:"Deadline"}),n.jsx("p",{className:"text-xs font-bold text-slate-500",children:new Date(e.deadline||"").toLocaleDateString("vi-VN")})]}),n.jsx("img",{src:P.find(t=>t.id===e.assigneeId)?.avatar,className:"w-6 h-6 md:w-8 md:h-8 rounded-full border border-slate-100 shadow-sm"})]})]},e.id))})]})]}),"projects"===s&&n.jsx("div",{className:"grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-3 gap-6 md:gap-8 modal-enter max-w-7xl mx-auto",children:A.map(e=>(0,n.jsxs)("div",{onClick:()=>{I(e.id),L("tasks")},className:"bg-white rounded-lg border border-slate-200 overflow-hidden shadow-sm hover:shadow-xl transition-all cursor-pointer group flex flex-col",children:[n.jsx("div",{className:"h-1 w-full",style:{backgroundColor:e.color}}),(0,n.jsxs)("div",{className:"p-6 md:p-8-1",children:[(0,n.jsxs)("div",{className:"flex justify-between items-start mb-4 md:mb-6",children:[n.jsx("div",{className:"p-2 bg-slate-50 rounded group-hover:bg-accent/5 transition-colors",children:n.jsx(x,{className:"w-5 h-5 md:w-6 md:h-6 text-slate-300 group-hover:text-accent"})}),n.jsx("span",{className:"px-2 py-0.5 bg-blue-50 text-blue-600 text-[9px] font-black rounded border border-blue-100 uppercase tracking-widest",children:"Active"})]}),n.jsx("h3",{className:"text-base md:text-lg font-bold text-slate-900 mb-2 group-hover:text-accent transition-colors",children:e.name}),n.jsx("p",{className:"text-xs text-slate-500 line-clamp-2 leading-relaxed mb-6 md:mb-10",children:e.description}),(0,n.jsxs)("div",{className:"flex justify-between items-center pt-6 md:pt-8 border-t border-slate-50",children:[(0,n.jsxs)("div",{className:"flex -space-x-2",children:[e.memberIds.slice(0,3).map(e=>n.jsx("img",{src:P.find(t=>t.id===e)?.avatar,className:"w-7 h-7 md:w-8 md:h-8 rounded-full border-2 border-white shadow-sm"},e)),e.memberIds.length>3&&(0,n.jsxs)("div",{className:"w-7 h-7 md:w-8 md:h-8 rounded-full bg-slate-100 flex items-center justify-center text-[8px] md:text-[9px] font-bold text-slate-400 border-2 border-white",children:["+",e.memberIds.length-3]})]}),(0,n.jsxs)("div",{className:"text-right",children:[n.jsx("p",{className:"text-[9px] font-black text-slate-300 uppercase",children:"Hạn"}),n.jsx("p",{className:"text-xs font-bold text-slate-800",children:new Date(e.deadline||"").toLocaleDateString("vi-VN")})]})]})]})]},e.id))}),"tasks"===s&&n.jsx("div",{className:"h-full flex flex-col modal-enter relative",children:n.jsx("div",{className:`flex gap-4 md:gap-6 overflow-x-auto pb-10 custom-scrollbar grab-scroll ${K?"cursor-grabbing":"cursor-grab"}`,ref:J,onMouseDown:e=>{J.current&&(X(!0),Q(e.pageX-J.current.offsetLeft),et(J.current.scrollLeft))},onMouseUp:ex,onMouseLeave:ex,onMouseMove:e=>{if(!K||!J.current)return;e.preventDefault();let t=e.pageX-J.current.offsetLeft;J.current.scrollLeft=ee-(t-Y)*1.5},children:D.map(e=>(0,n.jsxs)("div",{className:"kanban-column flex flex-col select-none",children:[n.jsx("div",{className:"flex items-center justify-between px-3 mb-4 md:mb-5",children:(0,n.jsxs)("div",{className:"flex items-center gap-2.5",children:[n.jsx("span",{className:"text-xs font-black text-slate-600 uppercase tracking-[0.15em]",children:e.label}),n.jsx("span",{className:"bg-slate-200/60 text-slate-500 text-[10px] px-2 py-0.5 rounded-full font-black",children:ej[e.id]?.length||0})]})}),n.jsx("div",{className:"flex-1 bg-slate-200/30 rounded-lg p-3 space-y-3 md:space-y-4 min-h-[500px] border border-slate-200/40",children:ej[e.id]?.map(t=>n.jsxs("div",{onClick:e=>{K||W(t)},className:"bg-white p-4 md:p-5 rounded-md border border-slate-200 shadow-sm hover:border-accent transition-all cursor-pointer group",children:[n.jsxs("div",{className:"flex justify-between items-start mb-3 md:mb-4",children:[n.jsx(ev,{task:t}),n.jsx("div",{className:`px-2 py-0.5 rounded text-[8px] font-black uppercase border ${t.priority===r.HIGH?"bg-red-50 text-red-500 border-red-100":"bg-slate-50 text-slate-400 border-slate-100"}`,children:t.priority})]}),n.jsx("h4",{className:"text-[13px] font-bold text-slate-800 mb-4 md:mb-5 leading-relaxed line-clamp-2 group-hover:text-accent transition-colors",children:t.title}),n.jsxs("div",{className:"flex justify-between items-center mt-auto",children:[n.jsxs("div",{className:"flex items-center gap-2",children:[n.jsx("img",{src:P.find(e=>e.id===t.assigneeId)?.avatar,className:"w-7 h-7 rounded-full border border-slate-100 shadow-sm"}),t.imageUrls&&t.imageUrls.length>0&&n.jsx("span",{className:"flex items-center gap-1 text-slate-300",children:n.jsx(j,{className:"w-3.5 h-3.5"})})]}),n.jsx("span",{className:`text-[10px] font-bold flex items-center gap-1 ${"overdue"===e.id?"text-red-500":"text-slate-400"}`,children:new Date(t.deadline||"").toLocaleDateString("vi-VN",{day:"2-digit",month:"2-digit"})})]})]},t.id))})]},e.id))})}),"team"===s&&n.jsx("div",{className:"grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-4 gap-6 md:gap-8 modal-enter max-w-7xl mx-auto",children:P.map(e=>{let t=M.filter(t=>t.assigneeId===e.id&&t.status!==l.DONE).length;return(0,n.jsxs)("div",{className:"bg-white p-6 md:p-8 rounded-lg border border-slate-200 shadow-sm text-center group hover:border-accent transition-all",children:[n.jsx("img",{src:e.avatar,className:"w-20 h-20 md:w-24 md:h-24 rounded-full mx-auto mb-6 border-4 border-slate-50 shadow-inner"}),n.jsx("h4",{className:"font-bold text-slate-900 group-hover:text-accent",children:e.name}),n.jsx("p",{className:"text-[9px] md:text-[10px] font-black text-slate-400 uppercase mb-6 tracking-widest",children:e.role}),(0,n.jsxs)("div",{className:"pt-6 border-t border-slate-50 flex justify-around",children:[(0,n.jsxs)("div",{className:"text-center",children:[n.jsx("p",{className:"text-lg md:text-xl font-black text-slate-900",children:t}),n.jsx("p",{className:"text-[8px] md:text-[9px] text-slate-400 font-black uppercase",children:"Đang l\xe0m"})]}),(0,n.jsxs)("div",{className:"text-center",children:[n.jsx("p",{className:"text-lg md:text-xl font-black text-slate-900",children:M.filter(t=>t.assigneeId===e.id&&t.status===l.DONE).length}),n.jsx("p",{className:"text-[8px] md:text-[9px] text-slate-400 font-black uppercase",children:"Xong"})]})]})]},e.id)})})]})]}),(0,n.jsxs)("nav",{className:"md:hidden fixed bottom-0 left-0 right-0 bg-white border-t border-slate-200 h-16 flex items-center justify-around px-2 z-40",children:[(0,n.jsxs)("button",{onClick:()=>{L("dashboard"),I(null)},className:`flex flex-col items-center justify-center w-full h-full gap-1 transition-colors ${"dashboard"===s?"text-accent":"text-slate-400"}`,children:[n.jsx(m,{className:"w-6 h-6"}),n.jsx("span",{className:"text-[9px] font-bold uppercase tracking-tighter",children:"Tổng quan"})]}),(0,n.jsxs)("button",{onClick:()=>{L("projects"),I(null)},className:`flex flex-col items-center justify-center w-full h-full gap-1 transition-colors ${"projects"===s?"text-accent":"text-slate-400"}`,children:[n.jsx(x,{className:"w-6 h-6"}),n.jsx("span",{className:"text-[9px] font-bold uppercase tracking-tighter",children:"Dự \xe1n"})]}),(0,n.jsxs)("button",{onClick:()=>{L("tasks"),I(null)},className:`flex flex-col items-center justify-center w-full h-full gap-1 transition-colors ${"tasks"===s?"text-accent":"text-slate-400"}`,children:[n.jsx(h,{className:"w-6 h-6"}),n.jsx("span",{className:"text-[9px] font-bold uppercase tracking-tighter",children:"C\xf4ng việc"})]}),(0,n.jsxs)("button",{onClick:()=>{L("team"),I(null)},className:`flex flex-col items-center justify-center w-full h-full gap-1 transition-colors ${"team"===s?"text-accent":"text-slate-400"}`,children:[n.jsx(p,{className:"w-6 h-6"}),n.jsx("span",{className:"text-[9px] font-bold uppercase tracking-tighter",children:"Nh\xe2n sự"})]})]}),eo&&n.jsx("div",{className:"fixed inset-0 z-[400] flex items-center justify-center bg-slate-900/60 backdrop-blur-sm p-4",onClick:()=>em(!1),children:(0,n.jsxs)("div",{className:"bg-white w-full max-w-md rounded-lg shadow-2xl overflow-hidden modal-enter max-h-[90vh] flex flex-col",onClick:e=>e.stopPropagation(),children:[(0,n.jsxs)("div",{className:"px-6 py-4 bg-primary text-white flex justify-between items-center shrink-0",children:[n.jsx("h3",{className:"text-xs font-black uppercase tracking-widest",children:"Th\xeam nh\xe2n sự"}),n.jsx("button",{onClick:()=>em(!1),children:n.jsx(d,{className:"w-6 h-6"})})]}),(0,n.jsxs)("form",{onSubmit:eg,className:"p-6 space-y-4 overflow-y-auto custom-scrollbar",children:[(0,n.jsxs)("div",{className:"space-y-1",children:[n.jsx("label",{className:"text-[10px] font-bold text-slate-400 uppercase tracking-widest",children:"Họ t\xean"}),n.jsx("input",{required:!0,name:"name",className:"w-full px-4 py-2.5 border border-slate-200 rounded text-sm bg-slate-50 focus:bg-white",placeholder:"T\xean nh\xe2n sự..."})]}),(0,n.jsxs)("div",{className:"space-y-1",children:[n.jsx("label",{className:"text-[10px] font-bold text-slate-400 uppercase tracking-widest",children:"Email"}),n.jsx("input",{required:!0,name:"email",type:"email",className:"w-full px-4 py-2.5 border border-slate-200 rounded text-sm bg-slate-50 focus:bg-white",placeholder:"email@company.com"})]}),(0,n.jsxs)("div",{className:"space-y-1",children:[n.jsx("label",{className:"text-[10px] font-bold text-slate-400 uppercase tracking-widest",children:"Mật khẩu"}),n.jsx("input",{required:!0,name:"password",type:"password",className:"w-full px-4 py-2.5 border border-slate-200 rounded text-sm bg-slate-50 focus:bg-white",placeholder:"******"})]}),(0,n.jsxs)("div",{className:"space-y-1",children:[n.jsx("label",{className:"text-[10px] font-bold text-slate-400 uppercase tracking-widest",children:"Vai tr\xf2"}),(0,n.jsxs)("select",{name:"role",className:"w-full px-4 py-2.5 border border-slate-200 rounded text-sm bg-slate-50",children:[n.jsx("option",{value:a.EMPLOYEE,children:"Employee"}),n.jsx("option",{value:a.MANAGER,children:"Manager"}),n.jsx("option",{value:a.ADMIN,children:"Admin"})]})]}),(0,n.jsxs)("div",{className:"space-y-1",children:[n.jsx("label",{className:"text-[10px] font-bold text-slate-400 uppercase tracking-widest",children:"Avatar (tuỳ chọn)"}),n.jsx("input",{name:"avatar",className:"w-full px-4 py-2.5 border border-slate-200 rounded text-sm bg-slate-50 focus:bg-white",placeholder:"https://..."})]}),n.jsx("button",{disabled:ed,className:"w-full py-3.5 bg-primary text-white rounded font-black text-sm uppercase tracking-widest mt-2 disabled:opacity-60",children:ed?"Đang tạo...":"Tạo t\xe0i khoản"})]})]})}),V&&n.jsx("div",{className:"fixed inset-0 z-[400] flex items-center justify-center bg-slate-900/60 backdrop-blur-sm p-4",onClick:()=>Z(!1),children:(0,n.jsxs)("div",{className:"bg-white w-full max-w-lg rounded-lg shadow-2xl overflow-hidden modal-enter max-h-[90vh] flex flex-col",onClick:e=>e.stopPropagation(),children:[(0,n.jsxs)("div",{className:"px-6 py-4 bg-primary text-white flex justify-between items-center shrink-0",children:[n.jsx("h3",{className:"text-xs font-black uppercase tracking-widest",children:"Khởi tạo dự \xe1n mới"}),n.jsx("button",{onClick:()=>Z(!1),children:n.jsx(d,{className:"w-6 h-6"})})]}),(0,n.jsxs)("form",{onSubmit:eu,className:"p-6 space-y-4 overflow-y-auto custom-scrollbar",children:[(0,n.jsxs)("div",{className:"space-y-1",children:[n.jsx("label",{className:"text-[10px] font-bold text-slate-400 uppercase tracking-widest",children:"T\xean dự \xe1n"}),n.jsx("input",{required:!0,name:"name",className:"w-full px-4 py-2.5 border border-slate-200 rounded text-sm bg-slate-50 focus:bg-white",placeholder:"T\xean dự \xe1n..."})]}),(0,n.jsxs)("div",{className:"space-y-1",children:[n.jsx("label",{className:"text-[10px] font-bold text-slate-400 uppercase tracking-widest",children:"M\xf4 tả"}),n.jsx("textarea",{name:"description",rows:3,className:"w-full px-4 py-2.5 border border-slate-200 rounded text-sm bg-slate-50 focus:bg-white",placeholder:"M\xf4 tả dự \xe1n..."})]}),n.jsx(C,{users:P,selectedIds:$,onChange:_,label:"Th\xe0nh vi\xean"}),(0,n.jsxs)("div",{className:"grid grid-cols-1 sm:grid-cols-2 gap-4",children:[(0,n.jsxs)("div",{className:"space-y-1",children:[n.jsx("label",{className:"text-[10px] font-bold text-slate-400 uppercase tracking-widest",children:"Ng\xe0y bắt đầu"}),n.jsx("input",{required:!0,name:"startDate",type:"date",className:"w-full px-4 py-2.5 border border-slate-200 rounded text-sm bg-slate-50",defaultValue:new Date().toISOString().split("T")[0]})]}),(0,n.jsxs)("div",{className:"space-y-1",children:[n.jsx("label",{className:"text-[10px] font-bold text-slate-400 uppercase tracking-widest",children:"Hạn b\xe0n giao"}),n.jsx("input",{required:!0,name:"deadline",type:"date",className:"w-full px-4 py-2.5 border border-slate-200 rounded text-sm bg-slate-50"})]})]}),n.jsx("button",{className:"w-full py-3.5 bg-primary text-white rounded font-black text-sm uppercase tracking-widest mt-2",children:"X\xe1c nhận dự \xe1n"})]})]})}),B&&n.jsx("div",{className:"fixed inset-0 z-[400] flex items-center justify-center bg-slate-900/60 backdrop-blur-sm p-4",onClick:()=>R(!1),children:(0,n.jsxs)("div",{className:"bg-white w-full max-w-xl rounded-lg shadow-2xl overflow-hidden modal-enter flex flex-col max-h-[90vh]",onClick:e=>e.stopPropagation(),children:[(0,n.jsxs)("div",{className:"px-6 py-4 bg-accent text-white flex justify-between items-center shrink-0",children:[n.jsx("h3",{className:"text-xs font-black uppercase tracking-widest",children:"Giao việc mới"}),n.jsx("button",{onClick:()=>R(!1),children:n.jsx(d,{className:"w-6 h-6"})})]}),(0,n.jsxs)("form",{onSubmit:ep,className:"p-6 space-y-4 overflow-y-auto custom-scrollbar",children:[(0,n.jsxs)("div",{className:"flex items-center justify-between p-3 bg-slate-50 rounded-lg border border-slate-100",children:[(0,n.jsxs)("div",{className:"flex items-center gap-3",children:[n.jsx(o,{className:"w-5 h-5 text-red-500"}),n.jsx("span",{className:"text-[10px] font-black text-slate-700 uppercase",children:"Chế độ b\xe1o lỗi (BUG)"})]}),n.jsx("input",{name:"isBug",type:"checkbox",className:"w-5 h-5 rounded accent-red-500"})]}),(0,n.jsxs)("div",{className:"space-y-1",children:[n.jsx("label",{className:"text-[10px] font-bold text-slate-400 uppercase tracking-widest",children:"Dự \xe1n"}),(0,n.jsxs)("select",{required:!0,name:"projectId",className:"w-full px-4 py-2.5 border border-slate-200 rounded text-sm bg-slate-50",children:[n.jsx("option",{value:"",children:"-- Lựa chọn dự \xe1n --"}),A.map(e=>n.jsx("option",{value:e.id,children:e.name},e.id))]})]}),(0,n.jsxs)("div",{className:"space-y-1",children:[n.jsx("label",{className:"text-[10px] font-bold text-slate-400 uppercase tracking-widest",children:"Ti\xeau đề"}),n.jsx("input",{required:!0,name:"title",className:"w-full px-4 py-2.5 border border-slate-200 rounded text-sm bg-slate-50",placeholder:"Cần l\xe0m g\xec..."})]}),(0,n.jsxs)("div",{className:"space-y-1",children:[n.jsx("label",{className:"text-[10px] font-bold text-slate-400 uppercase tracking-widest",children:"M\xf4 tả"}),n.jsx("textarea",{name:"description",rows:3,className:"w-full px-4 py-2.5 border border-slate-200 rounded text-sm bg-slate-50",placeholder:"Chi tiết quy tr\xecnh..."})]}),(0,n.jsxs)("div",{className:"space-y-3",children:[(0,n.jsxs)("label",{className:"text-[10px] font-bold text-slate-400 uppercase tracking-widest flex items-center gap-2",children:[n.jsx(j,{className:"w-4 h-4"})," Đ\xednh k\xe8m ảnh (",U.length,")"]}),(0,n.jsxs)("div",{className:"flex gap-2 overflow-x-auto pb-2 scrollbar-hide",children:[U.map((e,t)=>(0,n.jsxs)("div",{className:"relative w-20 h-20 shrink-0 rounded-md overflow-hidden border border-slate-200",children:[n.jsx("img",{src:e,className:"w-full h-full object-cover"}),n.jsx("button",{type:"button",onClick:()=>G(e=>e.filter((e,s)=>s!==t)),className:"absolute inset-0 bg-red-500/80 text-white flex items-center justify-center opacity-0 hover:opacity-100 transition-opacity",children:n.jsx(d,{className:"w-4 h-4"})})]},t)),(0,n.jsxs)("label",{className:"w-20 h-20 shrink-0 border-2 border-dashed border-slate-200 rounded-md flex flex-col items-center justify-center text-slate-300 hover:text-accent hover:border-accent cursor-pointer",children:[n.jsx(w,{className:"w-5 h-5"}),n.jsx("input",{type:"file",multiple:!0,accept:"image/*",className:"hidden",onChange:e=>{let t=e.target.files;t&&Promise.all(Array.from(t).map(e=>new Promise(t=>{let s=new FileReader;s.onloadend=()=>t(s.result),s.readAsDataURL(e)}))).then(e=>G(t=>[...t,...e]))}})]})]})]}),(0,n.jsxs)("div",{className:"grid grid-cols-1 sm:grid-cols-2 gap-4",children:[(0,n.jsxs)("div",{className:"space-y-1",children:[n.jsx("label",{className:"text-[10px] font-bold text-slate-400 uppercase tracking-widest",children:"Người thực hiện"}),(0,n.jsxs)("select",{required:!0,name:"assigneeId",className:"w-full px-4 py-2.5 border border-slate-200 rounded text-sm bg-slate-50",children:[n.jsx("option",{value:"",children:"-- Chọn --"}),P.map(e=>n.jsx("option",{value:e.id,children:e.name},e.id))]})]}),(0,n.jsxs)("div",{className:"space-y-1",children:[n.jsx("label",{className:"text-[10px] font-bold text-slate-400 uppercase tracking-widest",children:"Hạn ch\xf3t"}),n.jsx("input",{required:!0,name:"deadline",type:"date",className:"w-full px-4 py-2.5 border border-slate-200 rounded text-sm bg-slate-50 text-red-500"})]})]}),n.jsx("button",{type:"submit",className:"w-full py-3.5 bg-accent text-white rounded font-black text-sm uppercase tracking-widest mt-2",children:"K\xedch hoạt quy tr\xecnh"})]})]})}),q&&(0,n.jsxs)("div",{className:"fixed inset-0 z-[500] flex flex-col bg-white modal-enter overflow-hidden",children:[(0,n.jsxs)("div",{className:"h-14 md:h-16 px-4 md:px-8 border-b border-slate-100 flex justify-between items-center bg-slate-50 shrink-0",children:[(0,n.jsxs)("div",{className:"flex items-center gap-2 md:gap-4",children:[n.jsx("button",{onClick:()=>W(null),className:"p-2 -ml-2 text-slate-400 hover:text-slate-900",children:n.jsx(b,{className:"w-5 h-5 md:w-6 md:h-6"})}),n.jsx("div",{className:"hidden sm:block h-4 w-[1px] bg-slate-300 mx-2"}),(0,n.jsxs)("div",{className:"flex items-center gap-2 truncate",children:[n.jsx("div",{className:"w-2.5 h-2.5 rounded-full shrink-0",style:{backgroundColor:A.find(e=>e.id===q.projectId)?.color}}),n.jsx("span",{className:"text-[9px] md:text-[11px] font-black text-slate-400 uppercase tracking-[0.2em] truncate",children:A.find(e=>e.id===q.projectId)?.name})]})]}),(0,n.jsxs)("div",{className:"flex items-center gap-1 md:gap-4",children:[n.jsx("button",{onClick:()=>{confirm("X\xf3a c\xf4ng việc n\xe0y?")&&eb(q.id)},className:"p-2 text-red-400 hover:bg-red-50 rounded-lg transition-all",children:n.jsx(v,{className:"w-5 h-5 md:w-6 md:h-6"})}),n.jsx("button",{onClick:()=>W(null),className:"p-2 text-slate-400 hover:bg-slate-100 rounded-lg transition-all",children:n.jsx(d,{className:"w-5 h-5 md:w-6 md:h-6"})})]})]}),n.jsx("div",{className:"flex-1 overflow-y-auto custom-scrollbar bg-white",children:n.jsx("div",{className:"max-w-5xl mx-auto w-full px-4 md:px-8 py-8 md:py-16",children:(0,n.jsxs)("div",{className:"grid grid-cols-1 lg:grid-cols-3 gap-8 md:gap-16",children:[(0,n.jsxs)("div",{className:"lg:col-span-2 space-y-8 md:space-y-12",children:[(0,n.jsxs)("div",{className:"space-y-4 md:space-y-6",children:[(0,n.jsxs)("div",{className:"flex gap-3 items-center flex-wrap",children:[n.jsx(ev,{task:q}),n.jsx("span",{className:`px-2 py-0.5 rounded text-[10px] font-black uppercase border ${q.priority===r.HIGH?"bg-red-50 text-red-500 border-red-100":"bg-slate-50 text-slate-400 border-slate-100"}`,children:q.priority})]}),n.jsx("h2",{className:"text-3xl md:text-5xl font-black text-slate-900 leading-tight tracking-tight",children:q.title})]}),(0,n.jsxs)("div",{className:"space-y-4 md:space-y-6",children:[n.jsx("h4",{className:"text-[10px] md:text-xs font-black text-slate-900 uppercase tracking-[0.3em] border-l-4 border-primary pl-4 md:pl-5",children:"Nội dung y\xeau cầu"}),n.jsx("div",{className:"text-slate-600 leading-relaxed md:leading-[2] text-base md:text-lg whitespace-pre-wrap pl-4 md:pl-6",children:q.description||"Kh\xf4ng c\xf3 m\xf4 tả chi tiết cho nhiệm vụ n\xe0y."})]}),q.imageUrls&&q.imageUrls.length>0&&(0,n.jsxs)("div",{className:"space-y-4 md:space-y-6",children:[(0,n.jsxs)("h4",{className:"text-[10px] md:text-xs font-black text-slate-900 uppercase tracking-[0.3em] border-l-4 border-accent pl-4 md:pl-5",children:["H\xecnh ảnh đ\xednh k\xe8m (",q.imageUrls.length,")"]}),n.jsx("div",{className:"grid grid-cols-3 sm:grid-cols-4 md:grid-cols-5 lg:grid-cols-6 gap-2 md:gap-3 pl-4 md:pl-6",children:q.imageUrls.map((e,t)=>(0,n.jsxs)("div",{onClick:()=>z(t),className:"group relative aspect-square rounded-xl overflow-hidden border border-slate-100 cursor-zoom-in hover:border-accent transition-all",children:[n.jsx("img",{src:e,className:"w-full h-full object-cover"}),n.jsx("div",{className:"absolute inset-0 bg-black/0 group-hover:bg-black/10 transition-colors flex items-center justify-center",children:n.jsx(w,{className:"w-5 h-5 text-white opacity-0 group-hover:opacity-100 transition-all"})})]},t))})]})]}),n.jsx("div",{className:"space-y-4 md:space-y-6 pb-20 md:pb-0",children:(0,n.jsxs)("div",{className:"bg-slate-50 p-6 md:p-8 rounded-2xl border border-slate-100 space-y-6 md:space-y-8",children:[(0,n.jsxs)("div",{children:[n.jsx("p",{className:"text-[9px] md:text-[10px] font-bold text-slate-400 uppercase tracking-widest mb-4",children:"Nh\xe2n sự phụ tr\xe1ch"}),(0,n.jsxs)("div",{className:"flex items-center gap-3 md:gap-4",children:[n.jsx("img",{src:P.find(e=>e.id===q.assigneeId)?.avatar,className:"w-10 h-10 md:w-12 md:h-12 rounded-xl border border-white shadow-sm"}),(0,n.jsxs)("div",{children:[n.jsx("p",{className:"font-bold text-slate-900 text-sm md:text-base",children:P.find(e=>e.id===q.assigneeId)?.name}),n.jsx("p",{className:"text-[9px] md:text-[10px] text-slate-400 font-bold uppercase",children:P.find(e=>e.id===q.assigneeId)?.role})]})]})]}),(0,n.jsxs)("div",{className:"grid grid-cols-1 gap-4 md:gap-6 pt-6 border-t border-slate-200/60",children:[(0,n.jsxs)("div",{children:[(0,n.jsxs)("p",{className:"text-[9px] md:text-[10px] font-bold text-slate-400 uppercase tracking-widest mb-1 md:mb-2 flex items-center gap-2",children:[n.jsx(N,{className:"w-4 h-4"})," Thời hạn"]}),n.jsx("p",{className:"font-bold text-red-600 text-base md:text-lg",children:new Date(q.deadline||"").toLocaleDateString("vi-VN")})]}),(0,n.jsxs)("div",{children:[(0,n.jsxs)("p",{className:"text-[9px] md:text-[10px] font-bold text-slate-400 uppercase tracking-widest mb-1 md:mb-2 flex items-center gap-2",children:[n.jsx(k,{className:"w-4 h-4"})," Ng\xe0y khởi tạo"]}),n.jsx("p",{className:"font-bold text-slate-600 text-sm md:text-base",children:new Date(q.createdAt||"").toLocaleDateString("vi-VN")})]})]}),n.jsx("div",{className:"pt-4 md:pt-8",children:q.assigneeId===e.id&&q.status!==l.DONE?(0,n.jsxs)("button",{onClick:()=>ef(q),className:"w-full py-3 md:py-4 bg-emerald-600 text-white font-black text-[10px] md:text-sm rounded-xl shadow-lg hover:bg-emerald-700 transition-all flex items-center justify-center gap-3 uppercase tracking-widest",children:[n.jsx(c,{className:"w-5 h-5 md:w-6 md:h-6"})," Ho\xe0n th\xe0nh"]}):(0,n.jsxs)("div",{className:"p-3 md:p-4 bg-emerald-50 border border-emerald-100 rounded-xl flex items-center justify-center gap-3 text-emerald-700",children:[n.jsx(c,{className:"w-5 h-5"}),n.jsx("span",{className:"text-[10px] font-black uppercase tracking-widest",children:"Nhiệm vụ ho\xe0n tất"})]})})]})})]})})})]}),null!==F&&q?.imageUrls&&(0,n.jsxs)("div",{className:"fixed inset-0 z-[600] flex items-center justify-center bg-black/95 backdrop-blur-md animate-in fade-in duration-300",children:[n.jsx("button",{onClick:()=>z(null),className:"absolute top-4 right-4 md:top-8 md:right-8 z-[610] p-2 md:p-3 bg-white/10 hover:bg-white/20 text-white rounded-full transition-all",children:n.jsx(d,{className:"w-6 h-6 md:w-8 md:h-8"})}),n.jsx("button",{onClick:()=>z(e=>e>0?e-1:q.imageUrls.length-1),className:"absolute left-2 md:left-8 p-3 md:p-4 bg-white/5 hover:bg-white/10 text-white rounded-full transition-all",children:n.jsx(b,{className:"w-8 h-8 md:w-10 md:h-10"})}),n.jsx("button",{onClick:()=>z(e=>e<q.imageUrls.length-1?e+1:0),className:"absolute right-2 md:right-8 p-3 md:p-4 bg-white/5 hover:bg-white/10 text-white rounded-full transition-all",children:n.jsx(y,{className:"w-8 h-8 md:w-10 md:h-10"})}),(0,n.jsxs)("div",{className:"relative max-w-[95vw] md:max-w-[85vw] max-h-[85vh] select-none",children:[n.jsx("img",{src:q.imageUrls[F],className:"w-full h-full object-contain shadow-2xl animate-in zoom-in-90 duration-300",alt:"Lightbox view"}),(0,n.jsxs)("div",{className:"absolute -bottom-10 md:-bottom-12 left-1/2 -translate-x-1/2 flex items-center gap-4 text-white/60 font-black text-[10px] md:text-xs uppercase tracking-widest",children:[n.jsx("span",{children:F+1}),n.jsx("div",{className:"w-6 md:w-8 h-[1px] bg-white/20"}),n.jsx("span",{children:q.imageUrls.length})]})]})]})]}):n.jsx("div",{className:"min-h-screen bg-slate-900 flex items-center justify-center p-6",children:(0,n.jsxs)("div",{className:"bg-white w-full max-w-sm p-10 rounded-lg shadow-2xl modal-enter",children:[(0,n.jsxs)("div",{className:"text-center mb-10",children:[n.jsx("div",{className:"w-12 h-12 bg-slate-900 rounded-lg flex items-center justify-center text-white font-black mx-auto mb-4",children:"D"}),n.jsx("h1",{className:"text-xl font-bold text-slate-900 tracking-tight",children:"D-Line Workflows"}),n.jsx("p",{className:"text-xs text-slate-400 mt-1 uppercase font-bold tracking-widest",children:"Enterprise ERP"})]}),(0,n.jsxs)("form",{onSubmit:eh,className:"space-y-4",children:[n.jsx("input",{required:!0,name:"email",type:"email",placeholder:"Email",className:"w-full px-4 py-3 border border-slate-200 rounded text-sm bg-slate-50 focus:bg-white transition-all"}),n.jsx("input",{required:!0,name:"password",type:"password",placeholder:"Mật khẩu",className:"w-full px-4 py-3 border border-slate-200 rounded text-sm bg-slate-50 focus:bg-white transition-all"}),n.jsx("button",{className:"w-full py-3.5 bg-slate-900 text-white rounded font-bold text-sm hover:bg-slate-800 transition-all shadow-xl shadow-slate-900/10",children:"Đăng nhập"})]}),en&&n.jsx("p",{className:"text-red-500 text-xs mt-4 text-center",children:en}),0===P.length&&n.jsx("p",{className:"text-[11px] text-slate-500 text-center mt-4",children:"Chưa c\xf3 user trong DB. Tạo mới bằng API /api/users (POST) rồi đăng nhập."})]})})}},4403:(e,t,s)=>{"use strict";s.r(t),s.d(t,{default:()=>r,metadata:()=>l});var a=s(2051);s(7272);let l={title:"D-Line ERP | Next App",description:"Workflow v\xe0 quản trị dự \xe1n tr\xean nền Next.js"};function r({children:e}){return a.jsx("html",{lang:"vi",children:a.jsx("body",{children:e})})}},4050:(e,t,s)=>{"use strict";s.r(t),s.d(t,{default:()=>r});var a=s(2051);let l=(0,s(5347).createProxy)(String.raw`D:\CODE\NextJS\d-line\components\AppShell.tsx#default`);function r(){return a.jsx(l,{})}},7272:()=>{}};var t=require("../webpack-runtime.js");t.C(e);var s=e=>t(t.s=e),a=t.X(0,[787,39],()=>s(9222));module.exports=a})();