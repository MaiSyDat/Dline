"use strict";(()=>{var e={};e.id=373,e.ids=[373],e.modules={399:e=>{e.exports=require("next/dist/compiled/next-server/app-page.runtime.prod.js")},517:e=>{e.exports=require("next/dist/compiled/next-server/app-route.runtime.prod.js")},6967:(e,t,n)=>{n.r(t),n.d(t,{originalPathname:()=>h,patchFetch:()=>f,requestAsyncStorage:()=>p,routeModule:()=>l,serverHooks:()=>g,staticGenerationAsyncStorage:()=>d});var r={};n.r(r),n.d(r,{POST:()=>c});var o=n(3278),s=n(5002),a=n(4877),i=n(1309),u=n(3670);async function c(e){try{let{email:t,password:n}=await e.json();if(!t||!n)return i.NextResponse.json({ok:!1,error:"Thiếu email/password"},{status:400});let{users:r}=await (0,u.bG)(),o=await r.findOne({email:t,password:n});if(!o)return i.NextResponse.json({ok:!1,error:"Sai th\xf4ng tin đăng nhập"},{status:401});return i.NextResponse.json({ok:!0,data:o})}catch(t){let e=t instanceof Error?t.message:"Kh\xf4ng thể đăng nhập";return i.NextResponse.json({ok:!1,error:e},{status:500})}}let l=new o.AppRouteRouteModule({definition:{kind:s.x.APP_ROUTE,page:"/api/users/login/route",pathname:"/api/users/login",filename:"route",bundlePath:"app/api/users/login/route"},resolvedPagePath:"D:\\CODE\\NextJS\\d-line\\app\\api\\users\\login\\route.ts",nextConfigOutput:"",userland:r}),{requestAsyncStorage:p,staticGenerationAsyncStorage:d,serverHooks:g}=l,h="/api/users/login/route";function f(){return(0,a.patchFetch)({serverHooks:g,staticGenerationAsyncStorage:d})}},3670:(e,t,n)=>{n.d(t,{SI:()=>p,bG:()=>d,pg:()=>g});let r=require("mongodb"),o=process.env.DATABASE_URL,s=process.env.MONGODB_DB||"dline",a=null,i=null,u=null;async function c(){if(!o)throw Error("DATABASE_URL chưa được cấu h\xecnh cho MongoDB.");return a||(a=new r.MongoClient(o).connect())}async function l(){return i||(i=(await c()).db(s))}async function p(){let e=await l(),t=["users","projects","tasks"],n=new Set((await e.listCollections().toArray()).map(e=>e.name));for(let r of t)n.has(r)||await e.createCollection(r);return t}async function d(){if(u)return u;let e=await l();return await p(),u={users:e.collection("users"),projects:e.collection("projects"),tasks:e.collection("tasks")}}async function g(){let e=await l();return await e.command({ping:1}),{ok:1,db:e.databaseName}}}};var t=require("../../../../webpack-runtime.js");t.C(e);var n=e=>t(t.s=e),r=t.X(0,[787,833],()=>n(6967));module.exports=r})();