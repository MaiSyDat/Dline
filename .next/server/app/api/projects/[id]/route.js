"use strict";(()=>{var e={};e.id=361,e.ids=[361],e.modules={399:e=>{e.exports=require("next/dist/compiled/next-server/app-page.runtime.prod.js")},517:e=>{e.exports=require("next/dist/compiled/next-server/app-route.runtime.prod.js")},3538:(e,t,n)=>{n.r(t),n.d(t,{originalPathname:()=>m,patchFetch:()=>j,requestAsyncStorage:()=>l,routeModule:()=>d,serverHooks:()=>f,staticGenerationAsyncStorage:()=>h});var r={};n.r(r),n.d(r,{DELETE:()=>p,PUT:()=>c});var o=n(3278),a=n(5002),s=n(4877),i=n(1309),u=n(3670);async function c(e,{params:t}){try{let n=await e.json(),{projects:r}=await (0,u.bG)(),o=await r.findOneAndUpdate({id:t.id},{$set:n},{returnDocument:"after"});if(!o||!o.value)return i.NextResponse.json({ok:!1,error:"Kh\xf4ng t\xecm thấy dự \xe1n"},{status:404});return i.NextResponse.json({ok:!0,data:o.value})}catch(t){let e=t instanceof Error?t.message:"Kh\xf4ng thể cập nhật dự \xe1n";return i.NextResponse.json({ok:!1,error:e},{status:500})}}async function p(e,{params:t}){try{let{projects:e,tasks:n}=await (0,u.bG)();await n.deleteMany({projectId:t.id});let r=await e.deleteOne({id:t.id});if(0===r.deletedCount)return i.NextResponse.json({ok:!1,error:"Kh\xf4ng t\xecm thấy dự \xe1n"},{status:404});return i.NextResponse.json({ok:!0})}catch(t){let e=t instanceof Error?t.message:"Kh\xf4ng thể x\xf3a dự \xe1n";return i.NextResponse.json({ok:!1,error:e},{status:500})}}let d=new o.AppRouteRouteModule({definition:{kind:a.x.APP_ROUTE,page:"/api/projects/[id]/route",pathname:"/api/projects/[id]",filename:"route",bundlePath:"app/api/projects/[id]/route"},resolvedPagePath:"D:\\CODE\\NextJS\\d-line\\app\\api\\projects\\[id]\\route.ts",nextConfigOutput:"",userland:r}),{requestAsyncStorage:l,staticGenerationAsyncStorage:h,serverHooks:f}=d,m="/api/projects/[id]/route";function j(){return(0,s.patchFetch)({serverHooks:f,staticGenerationAsyncStorage:h})}},3670:(e,t,n)=>{n.d(t,{SI:()=>d,bG:()=>l,pg:()=>h});let r=require("mongodb"),o=process.env.DATABASE_URL,a=process.env.MONGODB_DB||"dline",s=null,i=null,u=null;async function c(){if(!o)throw Error("DATABASE_URL chưa được cấu h\xecnh cho MongoDB.");return s||(s=new r.MongoClient(o).connect())}async function p(){return i||(i=(await c()).db(a))}async function d(){let e=await p(),t=["users","projects","tasks"],n=new Set((await e.listCollections().toArray()).map(e=>e.name));for(let r of t)n.has(r)||await e.createCollection(r);return t}async function l(){if(u)return u;let e=await p();return await d(),u={users:e.collection("users"),projects:e.collection("projects"),tasks:e.collection("tasks")}}async function h(){let e=await p();return await e.command({ping:1}),{ok:1,db:e.databaseName}}}};var t=require("../../../../webpack-runtime.js");t.C(e);var n=e=>t(t.s=e),r=t.X(0,[787,833],()=>n(3538));module.exports=r})();