"use strict";(()=>{var e={};e.id=761,e.ids=[761],e.modules={399:e=>{e.exports=require("next/dist/compiled/next-server/app-page.runtime.prod.js")},517:e=>{e.exports=require("next/dist/compiled/next-server/app-route.runtime.prod.js")},6137:(e,t,r)=>{r.r(t),r.d(t,{originalPathname:()=>m,patchFetch:()=>f,requestAsyncStorage:()=>p,routeModule:()=>l,serverHooks:()=>h,staticGenerationAsyncStorage:()=>d});var n={};r.r(n),r.d(n,{GET:()=>u});var a=r(3278),o=r(5002),s=r(4877),i=r(1309),c=r(3670);async function u(){try{let e=await (0,c.pg)(),t=await (0,c.SI)();return i.NextResponse.json({ok:!0,result:e,collections:t})}catch(t){let e=t instanceof Error?t.message:"Kh\xf4ng thể kết nối cơ sở dữ liệu";return i.NextResponse.json({ok:!1,error:e},{status:500})}}let l=new a.AppRouteRouteModule({definition:{kind:o.x.APP_ROUTE,page:"/api/db-check/route",pathname:"/api/db-check",filename:"route",bundlePath:"app/api/db-check/route"},resolvedPagePath:"D:\\CODE\\NextJS\\d-line\\app\\api\\db-check\\route.ts",nextConfigOutput:"",userland:n}),{requestAsyncStorage:p,staticGenerationAsyncStorage:d,serverHooks:h}=l,m="/api/db-check/route";function f(){return(0,s.patchFetch)({serverHooks:h,staticGenerationAsyncStorage:d})}},3670:(e,t,r)=>{r.d(t,{SI:()=>p,bG:()=>d,pg:()=>h});let n=require("mongodb"),a=process.env.DATABASE_URL,o=process.env.MONGODB_DB||"dline",s=null,i=null,c=null;async function u(){if(!a)throw Error("DATABASE_URL chưa được cấu h\xecnh cho MongoDB.");return s||(s=new n.MongoClient(a).connect())}async function l(){return i||(i=(await u()).db(o))}async function p(){let e=await l(),t=["users","projects","tasks"],r=new Set((await e.listCollections().toArray()).map(e=>e.name));for(let n of t)r.has(n)||await e.createCollection(n);return t}async function d(){if(c)return c;let e=await l();return await p(),c={users:e.collection("users"),projects:e.collection("projects"),tasks:e.collection("tasks")}}async function h(){let e=await l();return await e.command({ping:1}),{ok:1,db:e.databaseName}}}};var t=require("../../../webpack-runtime.js");t.C(e);var r=e=>t(t.s=e),n=t.X(0,[787,833],()=>r(6137));module.exports=n})();