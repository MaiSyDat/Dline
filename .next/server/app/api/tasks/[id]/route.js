"use strict";(()=>{var e={};e.id=974,e.ids=[974],e.modules={399:e=>{e.exports=require("next/dist/compiled/next-server/app-page.runtime.prod.js")},517:e=>{e.exports=require("next/dist/compiled/next-server/app-route.runtime.prod.js")},6856:(e,t,n)=>{n.r(t),n.d(t,{originalPathname:()=>f,patchFetch:()=>m,requestAsyncStorage:()=>d,routeModule:()=>p,serverHooks:()=>g,staticGenerationAsyncStorage:()=>h});var r={};n.r(r),n.d(r,{DELETE:()=>l,PUT:()=>u});var a=n(3278),s=n(5002),o=n(4877),i=n(1309),c=n(3670);async function u(e,{params:t}){try{let n=await e.json(),{tasks:r}=await (0,c.bG)(),a=await r.findOneAndUpdate({id:t.id},{$set:n},{returnDocument:"after"});if(!a||!a.value)return i.NextResponse.json({ok:!1,error:"Kh\xf4ng t\xecm thấy c\xf4ng việc"},{status:404});return i.NextResponse.json({ok:!0,data:a.value})}catch(t){let e=t instanceof Error?t.message:"Kh\xf4ng thể cập nhật c\xf4ng việc";return i.NextResponse.json({ok:!1,error:e},{status:500})}}async function l(e,{params:t}){try{let{tasks:e}=await (0,c.bG)(),n=await e.deleteOne({id:t.id});if(0===n.deletedCount)return i.NextResponse.json({ok:!1,error:"Kh\xf4ng t\xecm thấy c\xf4ng việc"},{status:404});return i.NextResponse.json({ok:!0})}catch(t){let e=t instanceof Error?t.message:"Kh\xf4ng thể x\xf3a c\xf4ng việc";return i.NextResponse.json({ok:!1,error:e},{status:500})}}let p=new a.AppRouteRouteModule({definition:{kind:s.x.APP_ROUTE,page:"/api/tasks/[id]/route",pathname:"/api/tasks/[id]",filename:"route",bundlePath:"app/api/tasks/[id]/route"},resolvedPagePath:"D:\\CODE\\NextJS\\d-line\\app\\api\\tasks\\[id]\\route.ts",nextConfigOutput:"",userland:r}),{requestAsyncStorage:d,staticGenerationAsyncStorage:h,serverHooks:g}=p,f="/api/tasks/[id]/route";function m(){return(0,o.patchFetch)({serverHooks:g,staticGenerationAsyncStorage:h})}},3670:(e,t,n)=>{n.d(t,{SI:()=>p,bG:()=>d,pg:()=>h});let r=require("mongodb"),a=process.env.DATABASE_URL,s=process.env.MONGODB_DB||"dline",o=null,i=null,c=null;async function u(){if(!a)throw Error("DATABASE_URL chưa được cấu h\xecnh cho MongoDB.");return o||(o=new r.MongoClient(a).connect())}async function l(){return i||(i=(await u()).db(s))}async function p(){let e=await l(),t=["users","projects","tasks"],n=new Set((await e.listCollections().toArray()).map(e=>e.name));for(let r of t)n.has(r)||await e.createCollection(r);return t}async function d(){if(c)return c;let e=await l();return await p(),c={users:e.collection("users"),projects:e.collection("projects"),tasks:e.collection("tasks")}}async function h(){let e=await l();return await e.command({ping:1}),{ok:1,db:e.databaseName}}}};var t=require("../../../../webpack-runtime.js");t.C(e);var n=e=>t(t.s=e),r=t.X(0,[787,833],()=>n(6856));module.exports=r})();